function bindBlogPage(t){$(".book-nav").click(function(){$(this).toggleClass("hover")}),$(".book-search").focus(function(){$(this).addClass("focus")}).blur(function(){$(this).removeClass("focus")}),$(".book-search .fa-search").click(function(){var o=$(".book-search");o.hasClass("focus")?$(".book-search form").submit():o.addClass("focus")}),$(".book-navicon").click(function(){$(".book-skin").toggleClass("book-collapsed")}),$(".book-search [name=keywords]").keypress(function(){var o=$(this).val();o&&$.getJSON(t+"home/suggest?keywords="+o,function(o){if(200==o.code){var e="";$.each(o.data,function(o,t){e+="<li>"+t+"</li>"}),$(".book-search .search-tip").html(e)}})}),$(".book-search .search-tip").on("click","li",function(){$(".book-search [name=keywords]").val($(this).text()),$(".book-search form").submit()}),$(".book-body .book-item").addClass("fade-pre-item").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("fade-item")}).lazyload({callback:function(o,t,e,n){o.removeClass("fade-pre-item").css("animation-duration",.5*Math.floor(n/2)+1.5+"s").addClass("fade-item")}})}function bindBlog(o,e,t,n){void 0===n&&(n={}),1!=t&&(uParse("#content",{rootPath:"/assets/ueditor"}),SyntaxHighlighter.all());var a=$(".book-dynamic");$.get(o+"log",{blog:e},function(o){a.html(o)}),$.getJSON(o+"counter",{blog:e},function(o){200==o.code&&($(".book-body .tools .comment b").text(o.data.comment_count),$(".book-body .tools .click b").text(o.data.click_count),$(".book-body .tools .recommend-blog b").text(o.data.recommend))});var c=$(".book-footer");0<c.length&&$.get(o+"comment",{blog_id:e},function(o){c.html(o)}),$(".book-body .toggle-open").click(function(){$(this).closest(".book-body").toggleClass("open")}),$(".recommend-blog").click(function(){var t=$(this).find("b");$.getJSON(o+"recommend",{blog_id:e},function(o){200!=o.code?Dialog.tip(o.message):t.text(o.data)})});var s=$(".book-skin");$(".book-navicon").click(function(){s.toggleClass("book-collapsed")});function i(){r.headers.length<1||r.box.toggle(767<$(window).width())}var r=$("#content").sideNav({target:".book-side-nav",contentLength:20,maxLength:8,title:n.side_title,maxFixedTop:function(o,t){var e=c.length<1?s.offset().top+s.height():c.offset().top,n=t+$(window).height()-o.height()<e;if(!n)return o.css("top","auto"),n;var i=a.offset().top+a.height()-t;return i<=0?i=0:i+=20,o.css("top",i+"px"),n}});i(),$(window).resize(function(){i()})}function bindBlogComment(n,o,e){void 0===e&&(e={});function t(t,e){void 0===e&&(e=i),$.get(n+"comment/more",{blog_id:o,page:t,order:a?"desc":"asc"},function(o){t<2?e.html(o):e.append(o)})}var i=$("#comment-box"),a=!0;$(".comment-item .expand").click(function(){$(this).parent().parent().toggleClass("active")});var c=$(".book-comments").on("click","*[data-type=reply]",function(){var o=$(this),t=$(".book-comment-form");o.parent().append(t),t.find(".title").text(e.reply_title),t.find(".btn-submit").text(e.reply_btn),t.find("input[name=parent_id]").val(o.parents(".comment-item").attr("data-id"))}).on("click",".order span",function(){var o=$(this);o.hasClass("active")||(o.addClass("active").siblings().removeClass("active"),a=o.index()<1,t(1))}).on("click",".actions .agree",function(){var t=$(this),o=t.closest(".comment-item").data("id");$.getJSON(n+"comment/agree",{id:o},function(o){302!=o.code?200==o.code?t.find("b").text(o.data):alert(o.errors):window.location.href=o.url})}).on("click",".actions .disagree",function(){var t=$(this),o=t.closest(".comment-item").data("id");$.getJSON(n+"comment/disagree",{id:o},function(o){302!=o.code?200==o.code?t.find("b").text(o.data):alert(o.errors):window.location.href=o.url})});$(".book-comment-form .btn-cancel").click(function(){var o=$(this).closest(".book-comment-form"),t=$(".hot-comments");0<t.length?t.after(o):c.before(o),o.find("textarea").val(""),o.find(".title").text(e.comment_title),o.find(".btn-submit").text(e.comment_btn),o.find("input[name=parent_id]").val(0)}),$("#comment-form").submit(function(){var t=$(this);return $.post(t.attr("action"),t.serialize(),function(o){200!=o.code?alert(o.message):t.find(".btn-cancel").trigger("click")},"json"),!1}),i.on("click",".load-more",function(){var o=$(this);t(o.data("page")),o.remove()}),t(1)}$(function(){});