function bindBlogPage(o){$(".book-nav").click(function(){$(this).toggleClass("hover")}),$(".book-search").focus(function(){$(this).addClass("focus")}).blur(function(){$(this).removeClass("focus")}),$(".book-search .fa-search").click(function(){var t=$(".book-search");t.hasClass("focus")?$(".book-search form").submit():t.addClass("focus")}),$(".book-navicon").click(function(){$(".book-skin").toggleClass("book-collapsed")}),$(".book-search [name=keywords]").keypress(function(){var t=$(this).val();t&&$.getJSON(o+"home/suggest?keywords="+t,function(t){if(200==t.code){var e="";$.each(t.data,function(t,o){e+="<li>"+o+"</li>"}),$(".book-search .search-tip").html(e)}})}),$(".book-search .search-tip").on("click","li",function(){$(".book-search [name=keywords]").val($(this).text()),$(".book-search form").submit()}),$(".book-body .book-item").addClass("fade-pre-item").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("fade-item")}).lazyload({callback:function(t,o,e,n){t.removeClass("fade-pre-item").css("animation-duration",.5*Math.floor(n/2)+1.5+"s").addClass("fade-item")}})}function bindBlog(t,e,o){1!=o&&(uParse("#content",{rootPath:"/assets/ueditor"}),SyntaxHighlighter.all());var n=$(".book-footer");0<n.length&&$.get(t+"comment",{blog_id:e},function(t){n.html(t)}),$(".recommend-blog").click(function(){var o=$(this).find("b");$.getJSON(t+"recommend",{blog_id:e},function(t){200!=t.code?Dialog.tip(t.message):o.text(t.data)})}),$(".book-navicon").click(function(){$(".book-skin").toggleClass("book-collapsed")});var i=$("#content").sideNav({target:".book-side-nav",contentLength:20,maxLength:8,maxFixedTop:function(t,o){return n.length<1||o+$(window).height()-t.height()<n.offset().top}}),a=function(){i.headers.length<1||i.box.toggle(767<$(window).width())};a(),$(window).resize(function(){a()})}function bindBlogComment(n,t){var i=$("#comment-box"),a=!0,o=function(o,e){void 0===e&&(e=i),$.get(n+"comment/more",{blog_id:t,page:o,order:a?"desc":"asc"},function(t){o<2?e.html(t):e.append(t)})};$(".comment-item .expand").click(function(){$(this).parent().parent().toggleClass("active")});var e=$(".book-comments").on("click","*[data-type=reply]",function(){var t=$(this),o=$(".book-comment-form");t.parent().append(o),o.find(".title").text("回复评论"),o.find(".btn-submit").text("回复"),o.find("input[name=parent_id]").val(t.parents(".comment-item").attr("data-id"))}).on("click",".order span",function(){var t=$(this);t.hasClass("active")||(t.addClass("active").siblings().removeClass("active"),a=t.index()<1,o(1))}).on("click",".actions .agree",function(){var o=$(this),t=o.closest(".comment-item").data("id");$.getJSON(n+"comment/agree",{id:t},function(t){302!=t.code?200==t.code?o.find("b").text(t.data):alert(t.errors):window.location.href=t.url})}).on("click",".actions .disagree",function(){var o=$(this),t=o.closest(".comment-item").data("id");$.getJSON(n+"comment/disagree",{id:t},function(t){302!=t.code?200==t.code?o.find("b").text(t.data):alert(t.errors):window.location.href=t.url})});$(".book-comment-form .btn-cancel").click(function(){var t=$(this).closest(".book-comment-form"),o=$(".hot-comments");0<o.length?o.after(t):e.before(t),t.find("textarea").val(""),t.find(".title").text("发表评论"),t.find(".btn-submit").text("评论"),t.find("input[name=parent_id]").val(0)}),$("#comment-form").submit(function(){var o=$(this);return $.post(o.attr("action"),o.serialize(),function(t){200!=t.code?alert(t.message):o.find(".btn-cancel").trigger("click")},"json"),!1}),i.on("click",".load-more",function(){var t=$(this);o(t.data("page")),t.remove()}),o(1)}function bindMicroPage(e){$(".micro-publish form").submit(function(){var t=$(this);return $.post(t.attr("action"),t.serialize(),function(t){200!=t.code?alert(t.message):window.location.reload()},"json"),!1}),$(".micro-item [data-action=comment]").click(function(){var t=$(this).closest(".micro-item"),o=t.find(".comment-box").toggle();o.is(":hidden")||$.get(e+"micro/comment",{id:t.data("id")},function(t){o.html(t)})}),$(".micro-item [data-action=recommend]").click(function(){var o=$(this),t=o.closest(".micro-item");$.getJSON(e+"micro/recommend",{id:t.data("id")},function(t){200==t.code&&o.text("赞"+t.data).toggleClass("active")})})}$(function(){});