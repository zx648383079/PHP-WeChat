var NovelSwiper=(()=>{function t(t){this.target=t,this.defaultMaxWidth=800,this.defaultMinWidth=160,this.defaultGap=20,this.itemWidth=0,this.$win=$(window),this.index=-1,this.itemCount=0,this.timeout=5e3,this.timeHandler=0,this.init()}return t.prototype.init=function(){for(var t=this.target.find(".swiper-navigation-dot"),i=(0===t.length&&(t=$('<div class="swiper-navigation-dot"></div>'),this.target.append(t)),this.itemCount=this.target.find(".swiper-item").length,""),e=0;e<this.itemCount;e++)i+="<span></span>";t.html(i),this.bindEvent(),this.resize(),this.scrollTo(0),this.bindAutoplay()},t.prototype.bindAutoplay=function(){var t=this;0<this.timeHandler&&(clearTimeout(this.timeHandler),this.timeHandler=0),this.timeHandler=setTimeout(function(){t.next()},this.timeout)},t.prototype.stop=function(){0<this.timeHandler&&(clearTimeout(this.timeHandler),this.timeHandler=0)},t.prototype.bindEvent=function(){var t=this,i=this;this.$win.on("resize",this.resize.bind(this)),this.target.on("click",".swiper-navigation-dot span",function(){i.scrollTo($(this).index())}).on("mouseover",function(){t.stop()}).on("mouseleave",function(){t.bindAutoplay()})},t.prototype.resize=function(){var i=this,t=(this.itemWidth=Math.min(this.target.width()-this.defaultGap,this.defaultMaxWidth),this.target.find(".swiper-item")),e=t.length;this.target.find(".swiper-item-body").width(this.itemWidth),this.target.find(".swiper-body").width(this.itemWidth+this.defaultMinWidth*(e-1)+e*(this.defaultGap+10)),t.each(function(){var t=$(this);t.width(t.hasClass("swiper-item-active")?i.itemWidth:i.defaultMinWidth)})},t.prototype.next=function(){var t=this.index+1;t>=this.itemCount&&(t=0),this.scrollTo(t)},t.prototype.previous=function(){var t=this.index-1;t<0&&(t=this.itemCount-1),this.scrollTo(t)},t.prototype.scrollTo=function(e){var n=this,t=(this.target.find(".swiper-item").each(function(t){var t=e===t,i=$(this);i.toggleClass("swiper-item-active",t),i.width(t?n.itemWidth:n.defaultMinWidth)}),this.target.find(".swiper-navigation-dot span").eq(e).addClass("active").siblings().removeClass("active"),(this.defaultMinWidth+this.defaultGap)*e),i=t+this.itemWidth;this.target.find(".swiper-body").css({transform:i>this.target.width()?"translateX(".concat(-t,"px)"):"none"}),this.index=e,this.bindAutoplay()},t})();function bindSwiper(){var t=$(".novel-swiper");0!==t.length&&new NovelSwiper(t)}function bindReader(){var e,n,o,t,i,s;0!==$(".reader-container").length&&(e=function(t){i.find(".theme-box .theme-"+t).addClass("active"),$("body").addClass("theme-"+t),Cookies.set("theme",t)},n=function(t){i.find(".font-box span").eq(t).addClass("active"),$(".chapte-box").addClass("font-"+t),Cookies.set("font",t)},o=function(t){i.find(".size-box .lang").text(t),$(".chapte-box").css("font-size",t+"px"),Cookies.set("size",t)},t=function(){$(document.body).toggleClass("reader-focus-mode",s.width()<480||s.height()<480)},i=$(".setting-dialog").on("click",".dialog-close",function(){i.hide()}).on("click",".theme-box span",function(){var t=$(this),i=t.parent().find(".active").removeClass("active").attr("class"),t=t.index();$("body").removeClass(i),e(t)}).on("click",".font-box span",function(){var t=$(this),i=t.parent().find(".active").removeClass("active").index(),t=t.index();$(".chapte-box").removeClass("font-"+i),n(t)}).on("click",".size-box .fa",function(){var t=$(this),i=t.parent().find(".lang"),i=parseInt(i.text())||18,t=t.hasClass("fa-minus");i<=12&&t||48<=i&&!t||(t?i-=2:i+=2,o(i))}),s=$(window).on("scroll",function(){$(".reader-sidebar .go-top").toggle(50<s.scrollTop())}).on("resize",t),$(document).on("keydown",function(t){"ArrowRight"===t.code?(t.preventDefault(),t.stopPropagation(),window.location.href=$(".control-bar .next-item a").attr("href")):"ArrowLeft"===t.code?(t.preventDefault(),t.stopPropagation(),window.location.href=$(".control-bar .prev-item a").attr("href")):"Enter"===t.code&&(t.preventDefault(),t.stopPropagation(),window.location.href=$(".control-bar .menu-item a").attr("href"))}),$(".reader-sidebar").on("click",".go-top",function(){s.scrollTop(0)}).on("click",".do-setting",function(){i.show()}),e(Cookies.get("theme")||0),n(Cookies.get("font")||3),o(Cookies.get("size")||18),t())}$(function(){bindSwiper(),bindReader()});