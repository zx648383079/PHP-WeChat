function bindEditorInput(e){var i=$(".editor-input-box").on("change",'select[name="type"]',function(){$.get(window.location.href,{type:$(this).val()},function(t){i.html(t)})}).on("change",".media-box input",function(){var o=$(this).closest(".media-box"),t=o.find("#media_type");postJson(e+"media",{type:0<t.length?t.val():"news",keywords:$(this).val()},function(t){for(var e="",i=0,n=t.data.data;i<n.length;i++){var a=n[i];e+='<li data-id="'+a.id+'">'+a.title+"</li>"}o.find(".media-list ul, .media-grid ul").html(e)})}).on("click",".media-list li, .media-grid li",function(){var t=$(this),e=t.closest(".media-box");e.find(".upload-box").html(t.html()),e.find('input[type="hidden"]').val(t.data("id"))}),n=$(".template-preview"),t=$('[name="editor[template_id]"]').change(function(){postJson(e+"reply/template_field",{id:$(this).val()},function(t){var e,i;200!=t.code?n.html(""):(e=a.val().toString(),i=[],$.each(t.data,function(){var t=this+"=";e.indexOf(t)<0&&i.push(t)}),0<i.length?a.val((e+"\n"+i.join("\n")).trim()):a.trigger("change"))})}),a=$('[name="editor[template_data]"]').change(function(){postJson(e+"reply/template_preview",{id:t.val(),data:$(this).val()},function(t){200!=t.code?n.html(""):n.html(t.data.toString().replace(/\\+n/g,"<br>"))})})}function bindEditor(t){var e,i=$("#container").editor(),n=$(".template-box .templdate-list");$(".template-menu li").on("click",function(){$(this).addClass("active").siblings().removeClass("active"),e=$(this).attr("data-url"),n.empty(),$.post(e,{page:1},function(t){n.append(t)})}).eq(0).trigger("click"),n.on("click",".rich_media_content",function(){i.insert($(this).html())})}function bindEmulate(i){function t(){}function n(t,e){$.post(BASE_URI+"emulate/reply",{id:i,type:e,content:t},function(t){var e;200===t.code&&(setTimeout(function(){a.scrollTop(a[0].scrollHeight)},100),"text"===(t=t.data).type?a.append('<div class="message-left"><img class="avatar" src="/assets/images/favicon.png"><div class="content">'+t.content+"</div></div>"):"news"===t.type&&(e="",$.each(t.items,function(){e+='<a class="new-item" href="'+this.url+'" target="_blank"><div class="thumb"><img src="'+this.thumb+'" alt="'+this.title+'"></div><div class="title">'+this.title+"</div></a>"}),a.append(e)))},"json")}var e=$(".emulate-box"),a=e.find(".scroll-body"),o=(e.on("click",".box-header .fa-arrow-left",function(){history.back()}).on("click",".header-right .fa",function(){$(this).next(".sub-box").toggle()}),e.find(".box-footer").on("click",".fa-list",function(){o.removeClass("toggle-input").removeClass("toggle-more")}).on("click",".fa-plus-circle",function(){o.toggleClass("toggle-more")}).on("click",".fa-keyboard",function(){o.addClass("toggle-input").removeClass("toggle-more")}).on("click",".menu-body li",function(t){var e=$(this);e.data("event")?n(e.data("event"),"menu"):e.toggleClass("active")}).on("keydown",".input-box textarea",function(t){var e;"Enter"==t.code&&((e=this.value.trim()).length<1||(a.append('<div class="message-right"><img class="avatar" src="/assets/images/favicon.png"><div class="content">'+e+"</div></div>"),a.scrollTop(a[0].scrollHeight),n(e)),this.value="",t.preventDefault())}));$(window).on("resize",t)}function bindEmulateMedia(){$("img").lazyload({callback:"img"})}