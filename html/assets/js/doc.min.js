function formatJson(t,e){var a=null,i="",r=0;return(e=e||{}).newlineAfterColonIfBeforeBraceOrBracket=!0===e.newlineAfterColonIfBeforeBraceOrBracket,e.spaceAfterColon=!1!==e.spaceAfterColon,a=/([\{\}])/g,t=(t=("string"!=typeof t||(t=JSON.parse(t)),JSON.stringify(t))).replace(a,"\r\n$1\r\n"),a=/([\[\]])/g,t=t.replace(a,"\r\n$1\r\n"),a=/(\,)/g,t=t.replace(a,"$1\r\n"),a=/(\r\n\r\n)/g,t=t.replace(a,"\r\n"),a=/\r\n\,/g,t=t.replace(a,","),e.newlineAfterColonIfBeforeBraceOrBracket||(a=/\:\r\n\{/g,t=t.replace(a,":{"),a=/\:\r\n\[/g,t=t.replace(a,":[")),e.spaceAfterColon&&(a=/\:/g,t=t.replace(a,":")),t.split("\r\n").forEach(function(t,e){var a=0,n=0,o="";for(t.match(/\{$/)||t.match(/\[$/)?n=1:t.match(/\}/)||t.match(/\]/)?0!==r&&--r:n=0,a=0;a<r;a++)o+="    ";i+=o+t+"\r\n",r+=n}),i}function dialogPost(t,e,a){Dialog.box({url:t,title:e}).on("done",function(){var e=this,t=this.find("form");$.post(t.attr("action"),t.serialize(),function(t){e.close(),a&&a(t)})})}function refreshMock(t){postJson(t,function(t){200==t.code?refreshJson(t.data):parseAjax(t)})}function refreshJson(t){$(".json-box").html('<pre><code class="language-json">'+Prism.highlight(formatJson(t),Prism.languages.json)+"</code></pre>")}function editApi(n,o){$("[name=parent_id]").change(function(){$(".extent-box").toggle(0<$(this).val())}),$(document).on("click",'[data-action="add"]',function(){var e=$(this).closest(".panel"),t=e.data("kind");dialogPost(n+"create_field?kind="+t+"&api_id="+o,"添加字段",function(t){e.find("table tbody").html(t)})}).on("click",'[data-action="import"]',function(){var a=$(this).closest(".panel"),t=a.data("kind");Dialog.form({content:{type:"textarea",placeholder:"允许xml、json和表单格式数据",style:"width: 500px;height:300px"}},"自动配数据").on("done",function(){var e=this;$.post(n+"import_field?kind="+t+"&api_id="+o,e.data,function(t){e.close(),a.find("table tbody").html(t)})})}).on("click",'[data-action="edit"]',function(){var e=$(this).closest(".panel"),t=(e.data("kind"),$(this).closest("tr"));dialogPost(n+"edit_field?id="+t.data("id"),"编辑字段",function(t){e.find("table tbody").html(t)})}).on("click",'[data-action="delete"]',function(){var e=$(this).closest(".panel"),t=(e.data("kind"),$(this).closest("tr"));$.post(n+"delete_field?id="+t.data("id"),function(t){e.find("table tbody").html(t)})}).on("click",'[data-action="child"]',function(){var e=$(this).closest(".panel"),t=e.data("kind"),a=$(this).closest("tr");dialogPost(n+"create_field?kind="+t+"&api_id="+o+"&parent_id="+a.data("id"),"添加字段",function(t){e.find("table tbody").html(t)})})}$(function(){new ClipboardJS(".btn-copy").on("success",function(t){Dialog.tip("复制成功")}),$("#debug-box #uri-list").change(function(){$(this).next("input").val($(this).find("option:selected").attr("data-url"))}),$("#debug-box table").on("click",".fa-trash-o",function(){$(this).parents("tr").remove()}),$("#debug-box .js_addHeaderBtn").click(function(){$(this).parents(".panel").find("tbody:last").append('<tr><td style="width:40%"> <input name="header[key][]" class="form-control" placeholder="key"/> </td><td style="width:55%"> <input name="header[value][]" class="form-control" placeholder="value"/> </td><td style="width:5%"><a href="javascript:void(0);" class="fa fa-trash-o" title="删除header参数"></a> </td></tr>')}),$("#debug-box .js_addRequestBtn").click(function(){$(this).parents(".panel").find("tbody:last").append('<tr><td style="width:40%"> <input name="request[key][]" class="form-control" placeholder="key"/> </td><td style="width:55%"> <input name="request[value][]" class="form-control" placeholder="value"/> </td><td style="width:5%"><a href="javascript:void(0);" class="fa fa-trash-o" title="删除request参数"></a> </td></tr>')}),$("#debug-box .js_submit").click(function(){var t=$("#debug-box form");$.post(t.attr("action"),t.serialize(),function(t){$("#debug-box .js_responseBox").html(t)})});var a=$("#coder-dialog").dialog();a.find(".dialog-header form").submit(function(){var t=$(this),e=t.find("[name=lang]").val();return postJson(t.attr("action"),t.serialize(),function(t){200==t.code?(a.find(".dialog-body").html('<pre><code class="language-'+e+'">'+Prism.highlight(t.data,Prism.languages[e])+"</code></pre>"),a.showCenter()):parseAjax(t)}),!1}),$('a[data-action="code"]').click(function(){a.show()})});