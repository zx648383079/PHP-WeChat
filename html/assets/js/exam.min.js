function bindEditQuestion(){var t=$("input[name=id]").val()||0;$('select[name="type"]').change(function(){$.get(BASE_URI+"question/option",{id:t,type:$(this).val()},function(t){$(".option-box").html(t)})}),$("input[name=title]").on("change",function(){var n=$(this),t=n.val();if(t&&!(t.toString().trim().length<1)){var e=$("input[name=id]").val();postJson(BASE_URI+"question/check",{id:e,title:t},function(t){n.next("a").remove(),200===t.code&&t.data&&n.after('<a href="'+t.data.url+'" target="_blank">已存在【'+t.data.title+"】</a>")})}}),$(".option-box").on("click",".option-item .remove-btn",function(t){t.preventDefault();var n=$(this).closest(".option-item");n.siblings(".option-item").length<1||n.remove()}).on("click",".add-option",function(t){t.preventDefault();var n=$(this),e=n.prev(".option-item").clone();n.before(e),e.find("input,textarea").val(""),e.find("select").val(0)}).on("change",'.option-item select[name="option[is_right][]"]',function(t){$(this).val()<1||0<$('select[name="type"]').val()||$(this).closest(".option-item").siblings(".option-item").find('select[name="option[is_right][]"]').val(0)}).on("change",'.option-item select[name="option[type][]"]',function(t){if(!($(this).val()<1))$(this).closest(".option-item").find('input[name="option[content][]"]')})}function bindDo(t){$(".question-panel").on("change","input,textarea",function(){saveQuestion(t,$(this).closest(".question-item"))})}function bindDoQuestion(t){$(".question-panel").on("click",".tool-bar .btn-bar button",function(){var t=$(this),n=t.data("target");if(n){var e=t.text(),i=0<=e.indexOf("显示");return $(n).toggle(i),void t.text(i?e.replace("显示","收起"):e.replace("收起","显示"))}}).on("click",".tool-bar .btn-bar a",function(t){var n=$(this);if("check"===n.data("type")){t.preventDefault();var e=n.closest(".question-panel").find(".question-item-box");$.post(n.attr("href"),questionData(e),function(t){e.html(t)})}})}function questionData(t){var n=[];return t.find("input,textarea").each(function(){this.type&&0<=["radio","checkbox"].indexOf(this.type)&&!this.checked||n.push(encodeURIComponent(this.name)+"="+encodeURIComponent($(this).val().toString()))}),n.join("&")}function saveQuestion(t,n,e){var i=questionData(n);i.length<1||postJson(t+"pager/save",i,function(t){200===t.code&&e&&e(t.data)})}function bindDatePicker(t,n,e){void 0===t&&(t="start_at"),void 0===n&&(n="end_at"),void 0===e&&(e="yyyy-mm-dd");var i=$("[name="+t+"]").datetimer({format:e});n&&$("[name="+n+"]").datetimer({format:e,min:i})}function bindEditPage(){bindDatePicker();var t=$(".rule-box").on("click",".fa-times",function(){1!==t.find("tbody tr").length&&$(this).closest("tr").remove()}).on("click",".fa-plus",function(){t.find("tbody").append(t.find("tbody tr")[0].outerHTML)})}