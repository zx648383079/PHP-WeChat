function bindDatePicker(i,t,n){void 0===i&&(i="start_at"),void 0===t&&(t="end_at"),void 0===n&&(n="yyyy-mm-dd");var a=$("[name="+i+"]").datetimer({format:n});t&&$("[name="+t+"]").datetimer({format:n,min:a})}var FAMILY_SELECT="family_select";function bindEdit(){var t=$(".family-dialog").dialog();t.box.on("click",'*[data-action="add"]',function(i){i.preventDefault(),t.find(".dialog-new").show().siblings().hide()}).on("click",'*[data-action="back"]',function(i){i.preventDefault(),t.find(".dialog-list").show().siblings().hide()}).on("submit",".dialog-list form",function(){var i=$(this);return $.get(i.attr("action"),i.serialize(),function(i){t.find(".dialog-result").html(i)}),!1}).on("click",".dialog-list .dialog-result a",function(i){i.preventDefault(),$.get($(this).attr("href"),function(i){t.find(".dialog-result").html(i)})}).on("click",".dialog-list .family-item",function(){$(this).addClass("active").siblings().removeClass("active")}),t.on("done",function(){var t=this;if(this.find(".dialog-new").is(":hidden")){var i=this.find(".family-item.active");return i.length<1?void Dialog.tip("请选择"):(this.close(),void this.trigger(FAMILY_SELECT,i.attr("data-id"),i.find(".name").text()))}var n=this.find(".dialog-new form");ajaxForm(n.attr("action"),n.serialize(),function(i){200===i.code&&(t.close(),t.trigger(FAMILY_SELECT,i.data.id,i.data.name))})}),$(".zd-tab").on("click",'*[data-action="family"]',function(){var n=$(this);t.show(),t.on(FAMILY_SELECT,function(i,t){n.find("span").text(t),n.find("input").val(i)})}).on("click",".spouse-item .fa-times",function(){var t=$(this).closest(".spouse-item");postJson(BASE_URI+"family/delete_spouse",{id:t.data("id")},function(i){200===i.code&&t.remove()})}).on("click",".spouse-add",function(){$(this).before('<div class="spouse-item">\n        <div class="input-group">\n            <label for="mother_id">配偶</label>\n            <div class="" data-action="family">\n                <span>【请选择】</span>\n                <input type="hidden" name="spouse[spouse_id][]" value="0">\n            </div>\n        </div>\n        <div class="input-group">\n<label for="spouse_relation_">关系</label>\n<div class="">\n<select id="spouse_relation_" name="spouse[relation][]"><option value="0" selected="">妻</option>\n</select>\n\n</div>\n</div>                    <div class="input-group">\n            <label for="start_at">婚姻时间</label>\n            <div class="">\n                <input type="text" id="start_at" class="form-control " name="spouse[start_at][]">\n                ~\n                <input type="text" id="end_at" class="form-control " name="spouse[end_at][]">\n            </div>\n        </div>\n    </div>')}),bindDatePicker("birth_at","death_at","yyyy-mm-dd hh:ii:ss"),bindDatePicker()}