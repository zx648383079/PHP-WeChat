var Editor=function(){function t(t){this.element=t,this.textField=this.element.find("textarea")[0],this.init(),this.bindEvent()}return t.prototype.init=function(){},t.prototype.bindEvent=function(){var e=this;this.element.on("keydown","textarea",function(t){9===t.keyCode&&(t.preventDefault(),e.insert("    ",4,!0))}).on("blur","textarea",function(t){e.range={start:this.selectionStart,end:this.selectionEnd}}).on("click",".editor-plugin .fa",function(){var t=$(this);t.hasClass("fa-code")?e.insert("<code></code>",6,!0):t.hasClass("fa-eye-slash")?e.insert("<hide></hide>",6,!0):t.hasClass("fa-download")?e.insert("<file></file>",6,!0):t.hasClass("fa-image")?e.insert("<img></img>",5,!0):t.hasClass("fa-video")?e.insert("<video></video>",7,!0):t.hasClass("fa-link")&&e.insert('<a href=""></a>',9,!0)})},t.prototype.checkRange=function(){this.range||(this.range={start:this.textField.value.length,end:this.textField.value.length})},t.prototype.insert=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0),this.checkRange(),this.textField.value=this.textField.value.substr(0,this.range.start)+t+this.textField.value.substr(this.range.start),this.move(e),i&&this.focus()},t.prototype.replace=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=!0),this.checkRange(),this.range.start===this.range.end)return this.insert("function"==typeof t?t(""):t,e,i);var s="function"==typeof t?t(this.textField.value.substr(this.range.start,this.range.end-this.range.start)):t;this.textField.value=this.textField.value.substr(0,this.range.start)+s+this.textField.value.substr(this.range.end),this.move(e),i&&this.focus()},t.prototype.append=function(e,i,t){void 0===i&&(i=0),void 0===t&&(t=!0),this.replace(function(t){return t.length<1?e:i<1?t+e:i>t.length?e+t:e.substr(0,i)+t+e.substr(i)},i,t)},t.prototype.move=function(t){0!==t&&(t=this.range.start+t,this.range={start:t,end:Math.max(t,this.range.end)})},t.prototype.focus=function(){this.checkRange(),this.textField.selectionStart=this.range.start,this.textField.selectionEnd=this.range.end,this.textField.focus()},t}();$(function(){new Editor($(".editor"))});