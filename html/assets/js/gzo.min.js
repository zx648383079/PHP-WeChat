function bindCurd(){$.getJSON(BASE_URI+"sql/table",function(t){if(200==t.code){var e='<option value="">请选择</option>';$.each(t.data,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),$("#table1").html(e)}})}function bindImport(){$.getJSON(BASE_URI+"sql/schema",function(t){if(200==t.code){var e='<option value="">请选择</option>';$.each(t.data,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),$("#schema1").html(e)}})}function bindExport(){bindImport(),$("#schema1").change(function(){$("#table-box").hide(),$.getJSON(BASE_URI+"sql/table?schema="+$(this).val(),function(t){var e="";200==t.code&&$.each(t.data,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),$("#table1").html(e),$("#table-box").toggle(""!=e)})})}function bindCopy(){function a(t,n){$.getJSON(BASE_URI+"sql/column?table="+t,function(t){200==t.code&&n(t.data)})}function t(t){o.show(),e=t}var n,o=$(".dialog-select"),e=void 0;n=function(t){var e="";$.each(t,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),o.find('select[name="schame"]').html(e).trigger("change")},$.getJSON(BASE_URI+"sql/schema",function(t){200==t.code&&n(t.data)}),o.on("change",'select[name="schame"]',function(){var t,n;t=$(this).val(),n=function(t){var e="";$.each(t,function(t,n){e+='<option value="'+n+'">'+n+"</option>"}),o.find('select[name="table"]').html(e).trigger("change")},$.getJSON(BASE_URI+"sql/table?schema="+t,function(t){200==t.code&&n(t.data)})}).on("click","button",function(){o.hide(),e&&e(o.find('select[name="schame"]').val()+"."+o.find('select[name="table"]').val())}),$(document).on("click",'*[data-action="table-select"]',function(){var e=$(this);t(function(t){e.text(t),a(t,function(t){var n="";t.forEach(function(t){n+='<div class="column-item"><span>'+t.label+'</span>&lt;-<span data-action="column-select">请选择</span><i class="fa fa-times"></i></div>'}),e.closest(".panel").find(".panel-body").html(n)})})}).on("click",'*[data-action="table-add"]',function(){var n=$(this);t(function(t){n.before('<span class="table-item">'+t+'<i class="fa fa-times"></i></span>'),a(t,function(e){var t=n.closest(".panel");t.data("column",e),t.find(".panel-body .column-item").each(function(t,n){e.length<=t||$(n).find('[data-action="column-select"]').text(e[t].label)})})})}).on("click",".table-item .fa-times",function(){$(this).closest(".table-item").remove()}).on("click",".column-item .fa-times",function(){$(this).closest(".column-item").remove()})}$(document).ready(function(){$(document).on("click","button[data-type=preview]",function(){var t=$(this).parents("form");return postJson(t.attr("action")+"?preview=true",t.serialize(),function(t){200==t.code?Dialog.box({title:"预览",content:'<pre><code class="language-php">'+Prism.highlight(t.data.code,Prism.languages.php)+"</code></pre>"}):parseAjax(t)}),!1})});