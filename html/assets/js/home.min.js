$(function(){var i=$("footer"),e=$(window).height()-i.offset().top-i.height();0<e&&i.css("margin-top",e+"px"),$.cookie("c_t")||$(".dialog-cookie-tip").show(),$(".dialog-cookie-tip .btn").click(function(){$.cookie("c_t",1),$(this).closest(".dialog-cookie-tip").hide()});var f=$(".dialog-search");$(".nav-bar .search-icon").click(function(){f.show()}),f.on("click",".dialog-close",function(){f.hide()}).on("keyup","form input",function(i){var e=$(this),t=e.val();if(f.toggleClass("inputting",0<t.length),"Enter"!==i.key){if("ArrowDown"!==i.key&&"ArrowUp"!==i.key)return o=t,a=f.find(".search-suggestion"),void("undefined"!=typeof BASE_URI?!o||o.length<1?a.html("").hide():$.getJSON(BASE_URI+"suggestion",{keywords:o},function(i){if(200==i.code){var n="";i.data.forEach(function(i,e){e+=1;var t=void 0,o=i;"object"==typeof i&&(t=i.url,o=i.title||i.name),n+=t?'<li data-url="'+t+'"><span>'+e+"</span> "+o+"</li>":"<li><span>"+e+"</span> "+o+"</li>"}),a.html(n).show()}}):a.hide());var o,a,n=f.find(".search-suggestion li");if(!(n.length<0)){for(var r=-1,s=0;s<n.length;s++){var c=$(n[s]);if(c.hasClass("active")){r=s,c.removeClass("active");break}}"ArrowDown"===i.key?r=r<n.length-1?r+1:0:"ArrowUp"===i.key&&(r=(r<1?n.length:r)-1);var l=n.eq(r);l.addClass("active"),e.val(l.text().replace(/^\d+/,"").trim())}}else e.closest("form").submit()}).on("click",".input-clear",function(){$(this).prev("input").val("").trigger("keyup")}).on("click",".search-suggestion li",function(){var i=$(this),e=i.data("url");e?window.location.href=e:(i.addClass("active").siblings().removeClass("active"),f.find("form input").val(i.text().replace(/^\d+/,"").trim()),f.find("form").submit())})});