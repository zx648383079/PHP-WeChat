!function(s){var l=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,u=/^<\/([-A-Za-z0-9_]+)[^>]*>/,f=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,h=a("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),p=a("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),m=a("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),g=a("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),b=a("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),v=a("script,style");function a(t){for(var e={},n=t.split(","),r=0;r<n.length;r++)e[n[r]]=!0;return e}function c(t){return'"'+t+'"'}s.HTMLParser=function(t,i){for(var e,o=[],n=t;t;){var r,a=!0;if(o[o.length-1]&&v[o[o.length-1]]?(t=t.replace(new RegExp("([\\s\\S]*?)</"+o[o.length-1]+"[^>]*>"),function(t,e){return e=e.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),i.chars&&i.chars(e),""}),d(0,o[o.length-1])):(0==t.indexOf("\x3c!--")?0<=(r=t.indexOf("--\x3e"))&&(i.comment&&i.comment(t.substring(4,r)),t=t.substring(r+3),a=!1):0==t.indexOf("</")?(e=t.match(u))&&(t=t.substring(e[0].length),e[0].replace(u,d),a=!1):0==t.indexOf("<")&&(e=t.match(l))&&(t=t.substring(e[0].length),e[0].replace(l,c),a=!1),a&&(a=(r=t.indexOf("<"))<0?t:t.substring(0,r),t=r<0?"":t.substring(r),i.chars&&i.chars(a))),t==n)throw"Parse Error: "+t;n=t}function c(t,e,n,r){if(e=e.toLowerCase(),p[e])for(;o[o.length-1]&&m[o[o.length-1]];)d(0,o[o.length-1]);var a;g[e]&&o[o.length-1]==e&&d(0,e),(r=h[e]||!!r)||o.push(e),i.start&&(a=[],n.replace(f,function(t,e){var n=arguments[2]||arguments[3]||arguments[4]||(b[e]?e:"");a.push({name:e,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})}),i.start&&i.start(e,a,r))}function d(t,e){if(e)for(n=o.length-1;0<=n&&o[n]!=e;n--);else var n=0;if(0<=n){for(var r=o.length-1;n<=r;r--)i.end&&i.end(o[r]);o.length=n}}d()},s.HTMLtoXML=function(t){var a="";return s.HTMLParser(t,{start:function(t,e,n){a+="<"+t;for(var r=0;r<e.length;r++)a+=" "+e[r].name+'="'+e[r].escaped+'"';a+=">"},end:function(t){a+="</"+t+">"},chars:function(t){a+=t},comment:function(t){a+="\x3c!--"+t+"--\x3e"}}),a},s.HTMLtoDOM=function(t,i){var o=a("html,head,body,title"),c={link:"head",base:"head"};i?i=i.ownerDocument||i.getOwnerDocument&&i.getOwnerDocument()||i:"undefined"!=typeof DOMDocument?i=new DOMDocument:"undefined"!=typeof document&&document.implementation&&document.implementation.createDocument?i=document.implementation.createDocument("","",null):"undefined"!=typeof ActiveX&&(i=new ActiveXObject("Msxml.DOMDocument"));var e,n,d=[];if(!(i.documentElement||i.getDocumentElement&&i.getDocumentElement())&&i.createElement&&(e=i.createElement("html"),(n=i.createElement("head")).appendChild(i.createElement("title")),e.appendChild(n),e.appendChild(i.createElement("body")),i.appendChild(e)),i.getElementsByTagName)for(var r in o)o[r]=i.getElementsByTagName(r)[0];var l=o.body;return s.HTMLParser(t,{start:function(t,e,n){if(o[t])return l=o[t],void(n||d.push(l));var r,a=i.createElement(t);for(r in e)a.setAttribute(e[r].name,e[r].value);c[t]&&"boolean"!=typeof o[c[t]]?o[c[t]].appendChild(a):l&&l.appendChild&&l.appendChild(a),n||(d.push(a),l=a)},end:function(t){--d.length,l=d[d.length-1]},chars:function(t){l.appendChild(i.createTextNode(t))},comment:function(t){}}),i},s.HTMLtoJSON=function(t){t=t.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*\>\n/,"").replace(/<!DOCTYPE.*\>\n/,"");var r=[],a={node:"root",child:[]};return s.HTMLParser(t,{start:function(t,e,n){t={node:"element",tag:t};0!==e.length&&(t.attr=e.reduce(function(t,e){var n=e.name,e=e.value;return e.match(/ /)&&(e=e.split(" ")),t[n]?Array.isArray(t[n])?t[n].push(e):t[n]=[t[n],e]:t[n]=e,t},{})),n?(void 0===(n=r[0]||a).child&&(n.child=[]),n.child.push(t)):r.unshift(t)},end:function(t){var e=r.shift();e.tag!==t&&console.error("invalid state: mismatch end tag"),0===r.length?a.child.push(e):(void 0===(t=r[0]).child&&(t.child=[]),t.child.push(e))},chars:function(t){var e={node:"text",text:t};0===r.length?a.child.push(e):(void 0===(t=r[0]).child&&(t.child=[]),t.child.push(e))},comment:function(t){var e={node:"comment",text:t},t=r[0];void 0===t.child&&(t.child=[]),t.child.push(e)}}),a},s.JSONtoHTML=function(n){var t="";n.child&&(t=n.child.map(function(t){return s.JSONtoHTML(t)}).join(""));var e="";if(n.attr&&""!==(e=Object.keys(n.attr).map(function(t){var e=n.attr[t];return t+"="+c(e=Array.isArray(e)?e.join(" "):e)}).join(" "))&&(e=" "+e),"element"!==n.node)return"text"===n.node?n.text:"comment"===n.node?"\x3c!--"+n.text+"--\x3e":"root"===n.node?t:void 0;var r=n.tag;return-1<["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed"].indexOf(r)?"<"+n.tag+e+"/>":"<"+n.tag+e+">"+t+("</"+n.tag+">")},s.JSONtoWXML=function(t){if("text"==t.node)return/^\s+$/.test(t.text)?"":"<text>"+t.text+"</text>";var e="";t.child&&(e=t.child.map(function(t){return s.JSONtoWXML(t)}).join(""));var i=["id","class","style","src"],n=["value","type","password","placeholder","disabled","maxlength","focus","cursor","class","id"];if("root"===t.node)return e;if("comment"===t.node)return"\x3c!--"+t.text+"--\x3e";if("element"!=t.node)return e;if("img"==t.tag)return"<image"+a(t.attr)+"></image>";if("input"==t.tag)return function(t){t.attr||(t.attr={type:"text"});"password"==t.attr.type&&(t.attr.type="text",t.attr.password="true");if(0<=["button","reset","submit"].indexOf(t.attr.type))return t.text=t.attr.value,t.tag="button",o(t);if("checkbox"==t.attr.type)return"<checkbox"+a(t.attr,["value","checked","class","id"])+"/>";if("radio"==t.attr.type)return"<radio"+a(t.attr,["value","checked","class","id"])+"/>";["text","number","idcard","digit"].indexOf(t.attr.type)<0&&(t.attr.type="text");return"<input"+a(t.attr,n)+"/>"}(t);if("button"==t.tag)return o(t);if("form"==t.tag)return"<form"+a(t.attr)+">"+e+"</form>";if(t.child&&1==t.child.length&&"text"==t.child[0].node&&(e=t.child[0].text),"label"==t.tag)return"<label"+a(t.attr,["for"])+">"+e+"</label>";if("style"==t.tag)return"<style"+a(t.attr,["type","lang","scoped"])+">"+e+"</style>";if("script"==t.tag)return"<script"+a(t.attr,["type","lang","src"])+">"+e+"<\/script>";if("textarea"==t.tag)return t.attr.vlaue=e,"<textarea"+a(t.attr,n)+"/>";if("a"==t.tag){var r=a(t.attr,["id","class"]);return t.attr&&t.attr.href&&(r+=" url="+c(t.attr.href)),"<navigator"+r+">"+e+"</navigator>"}r=a(t.attr);return 0<=["i","span","strong","block","font"].indexOf(t.tag)&&(!t.child||1==t.child.length&&"text"==t.child[0].node)?"<text"+r+">"+e+"</text>":"<view"+r+">"+e+"</view>";function a(t,e){void 0===e&&(e=i);var n,r,a="";if(!t)return a;for(n in t)t.hasOwnProperty(n)&&0<=e.indexOf(n)&&(r=t[n],a+=" "+n+"="+c(r=Array.isArray(r)?r.join(" "):r));return a}function o(t){var e=a(t.attr);return t.attr&&0<=["reset","submit"].indexOf(t.attr.type)&&(e+=" form-type="+c(t.attr.type)),'<button type="default"'+e+">"+t.text+"</button>"}},s.HTMLtoWXML=function(t){if(!t)return console.log("please input html content!!!"),0;t=s.HTMLtoJSON(t);return s.JSONtoWXML(t)}}(this);