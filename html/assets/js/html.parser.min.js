!function(s){var u=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,f=/^<\/([-A-Za-z0-9_]+)[^>]*>/,h=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,p=a("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),m=a("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),g=a("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),v=a("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),b=a("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),x=a("script,style");function a(t){for(var e={},r=t.split(","),n=0;n<r.length;n++)e[r[n]]=!0;return e}function l(t){return'"'+t+'"'}s.HTMLParser=function(t,i){for(var e,r,n,o=[],a=t;t;){if(r=!0,o[o.length-1]&&x[o[o.length-1]])t=t.replace(new RegExp("([\\s\\S]*?)</"+o[o.length-1]+"[^>]*>"),function(t,e){return e=e.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),i.chars&&i.chars(e),""}),d("",o[o.length-1]);else if(0==t.indexOf("\x3c!--")?0<=(e=t.indexOf("--\x3e"))&&(i.comment&&i.comment(t.substring(4,e)),t=t.substring(e+3),r=!1):0==t.indexOf("</")?(n=t.match(f))&&(t=t.substring(n[0].length),n[0].replace(f,d),r=!1):0==t.indexOf("<")&&(n=t.match(u))&&(t=t.substring(n[0].length),n[0].replace(u,l),r=!1),r){var c=(e=t.indexOf("<"))<0?t:t.substring(0,e);t=e<0?"":t.substring(e),i.chars&&i.chars(c)}if(t==a)throw"Parse Error: "+t;a=t}function l(t,e,r,n){if(e=e.toLowerCase(),m[e])for(;o[o.length-1]&&g[o[o.length-1]];)d("",o[o.length-1]);if(v[e]&&o[o.length-1]==e&&d("",e),(n=p[e]||!!n)||o.push(e),i.start){var a=[];r.replace(h,function(t,e){var r=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:b[e]?e:"";a.push({name:e,value:r,escaped:r.replace(/(^|[^\\])"/g,'$1\\"')})}),i.start&&i.start(e,a,n)}}function d(t,e){if(e)for(r=o.length-1;0<=r&&o[r]!=e;r--);else var r=0;if(0<=r){for(var n=o.length-1;r<=n;n--)i.end&&i.end(o[n]);o.length=r}}d()},s.HTMLtoXML=function(t){var a="";return s.HTMLParser(t,{start:function(t,e,r){a+="<"+t;for(var n=0;n<e.length;n++)a+=" "+e[n].name+'="'+e[n].escaped+'"';a+=">"},end:function(t){a+="</"+t+">"},chars:function(t){a+=t},comment:function(t){a+="\x3c!--"+t+"--\x3e"}}),a},s.HTMLtoDOM=function(t,i){var o=a("html,head,body,title"),c={link:"head",base:"head"};i?i=i.ownerDocument||i.getOwnerDocument&&i.getOwnerDocument()||i:"undefined"!=typeof DOMDocument?i=new DOMDocument:"undefined"!=typeof document&&document.implementation&&document.implementation.createDocument?i=document.implementation.createDocument("","",null):"undefined"!=typeof ActiveX&&(i=new ActiveXObject("Msxml.DOMDocument"));var e,r,l=[];if(!(i.documentElement||i.getDocumentElement&&i.getDocumentElement())&&i.createElement&&(e=i.createElement("html"),(r=i.createElement("head")).appendChild(i.createElement("title")),e.appendChild(r),e.appendChild(i.createElement("body")),i.appendChild(e)),i.getElementsByTagName)for(var n in o)o[n]=i.getElementsByTagName(n)[0];var d=o.body;return s.HTMLParser(t,{start:function(t,e,r){if(o[t])return d=o[t],void(r||l.push(d));var n=i.createElement(t);for(var a in e)n.setAttribute(e[a].name,e[a].value);c[t]&&"boolean"!=typeof o[c[t]]?o[c[t]].appendChild(n):d&&d.appendChild&&d.appendChild(n),r||(l.push(n),d=n)},end:function(t){l.length-=1,d=l[l.length-1]},chars:function(t){d.appendChild(i.createTextNode(t))},comment:function(t){}}),i},s.HTMLtoJSON=function(t){t=t.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*\>\n/,"").replace(/<!DOCTYPE.*\>\n/,"");var i=[],o={node:"root",child:[]};return s.HTMLParser(t,{start:function(t,e,r){var n={node:"element",tag:t};if(0!==e.length&&(n.attr=e.reduce(function(t,e){var r=e.name,n=e.value;return n.match(/ /)&&(n=n.split(" ")),t[r]?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n,t},{})),r){var a=i[0]||o;void 0===a.child&&(a.child=[]),a.child.push(n)}else i.unshift(n)},end:function(t){var e=i.shift();if(e.tag!==t&&console.error("invalid state: mismatch end tag"),0===i.length)o.child.push(e);else{var r=i[0];void 0===r.child&&(r.child=[]),r.child.push(e)}},chars:function(t){var e={node:"text",text:t};if(0===i.length)o.child.push(e);else{var r=i[0];void 0===r.child&&(r.child=[]),r.child.push(e)}},comment:function(t){var e={node:"comment",text:t},r=i[0];void 0===r.child&&(r.child=[]),r.child.push(e)}}),o},s.JSONtoHTML=function(r){var t="";r.child&&(t=r.child.map(function(t){return s.JSONtoHTML(t)}).join(""));var e="";if(r.attr&&""!==(e=Object.keys(r.attr).map(function(t){var e=r.attr[t];return Array.isArray(e)&&(e=e.join(" ")),t+"="+l(e)}).join(" "))&&(e=" "+e),"element"===r.node){var n=r.tag;return-1<["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed"].indexOf(n)?"<"+r.tag+e+"/>":"<"+r.tag+e+">"+t+("</"+r.tag+">")}return"text"===r.node?r.text:"comment"===r.node?"\x3c!--"+r.text+"--\x3e":"root"===r.node?t:void 0},s.JSONtoWXML=function(t){if("text"==t.node)return/^\s+$/.test(t.text)?"":"<text>"+t.text+"</text>";var e="";t.child&&(e=t.child.map(function(t){return s.JSONtoWXML(t)}).join(""));var i=["id","class","style","src"],n=["value","type","password","placeholder","disabled","maxlength","focus","cursor","class","id"];if("root"===t.node)return e;if("comment"===t.node)return"\x3c!--"+t.text+"--\x3e";if("element"!=t.node)return e;if("img"==t.tag)return"<image"+o(t.attr)+"></image>";if("input"==t.tag)return function(t){t.attr||(t.attr={type:"text"});"password"==t.attr.type&&(t.attr.type="text",t.attr.password="true");if(0<=["button","reset","submit"].indexOf(t.attr.type))return t.text=t.attr.value,t.tag="button",c(t);if("checkbox"==t.attr.type){var e=o(t.attr,["value","checked","class","id"]);return"<checkbox"+e+"/>"}if("radio"==t.attr.type){var r=o(t.attr,["value","checked","class","id"]);return"<radio"+r+"/>"}["text","number","idcard","digit"].indexOf(t.attr.type)<0&&(t.attr.type="text");return"<input"+o(t.attr,n)+"/>"}(t);if("button"==t.tag)return c(t);if("form"==t.tag)return"<form"+o(t.attr)+">"+e+"</form>";if(t.child&&1==t.child.length&&"text"==t.child[0].node&&(e=t.child[0].text),"label"==t.tag)return"<label"+o(t.attr,["for"])+">"+e+"</label>";if("style"==t.tag)return"<style"+o(t.attr,["type","lang","scoped"])+">"+e+"</style>";if("script"==t.tag)return"<script"+o(t.attr,["type","lang","src"])+">"+e+"<\/script>";if("textarea"==t.tag)return t.attr.vlaue=e,"<textarea"+o(t.attr,n)+"/>";if("a"==t.tag){var r=o(t.attr,["id","class"]);return t.attr&&t.attr.href&&(r+=" url="+l(t.attr.href)),"<navigator"+r+">"+e+"</navigator>"}var a=o(t.attr);return 0<=["i","span","strong","block","font"].indexOf(t.tag)&&(!t.child||1==t.child.length&&"text"==t.child[0].node)?"<text"+a+">"+e+"</text>":"<view"+a+">"+e+"</view>";function o(t,e){void 0===e&&(e=i);var r="";if(!t)return r;for(var n in t)if(t.hasOwnProperty(n)&&0<=e.indexOf(n)){var a=t[n];Array.isArray(a)&&(a=a.join(" ")),r+=" "+n+"="+l(a)}return r}function c(t){o(t.attr);t.attr&&0<=["reset","submit"].indexOf(t.attr.type)&&l(t.attr.type)}},s.HTMLtoWXML=function(t){if(!t)return console.log("please input html content!!!"),0;var e=s.HTMLtoJSON(t);return s.JSONtoWXML(e)}}(this);