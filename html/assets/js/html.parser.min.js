(s=>{var d=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,u=/^<\/([-A-Za-z0-9_]+)[^>]*>/,h=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,m=r("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),p=r("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),f=r("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),g=r("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),b=r("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),v=r("script,style");function r(t){for(var e={},n=t.split(","),a=0;a<n.length;a++)e[n[a]]=!0;return e}function l(t){return'"'+t+'"'}s.HTMLParser=function(t,o){for(var e,c=[],n=t;t;){var a,r=!0;if(c[c.length-1]&&v[c[c.length-1]]?(t=t.replace(new RegExp("([\\s\\S]*?)</"+c[c.length-1]+"[^>]*>"),function(t,e){return e=e.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),o.chars&&o.chars(e),""}),l(0,c[c.length-1])):(0==t.indexOf("\x3c!--")?0<=(a=t.indexOf("--\x3e"))&&(o.comment&&o.comment(t.substring(4,a)),t=t.substring(a+3),r=!1):0==t.indexOf("</")?(e=t.match(u))&&(t=t.substring(e[0].length),e[0].replace(u,l),r=!1):0==t.indexOf("<")&&(e=t.match(d))&&(t=t.substring(e[0].length),e[0].replace(d,i),r=!1),r&&(r=(a=t.indexOf("<"))<0?t:t.substring(0,a),t=a<0?"":t.substring(a),o.chars)&&o.chars(r)),t==n)throw"Parse Error: "+t;n=t}function i(t,e,n,a){if(e=e.toLowerCase(),p[e])for(;c[c.length-1]&&f[c[c.length-1]];)l(0,c[c.length-1]);var r;g[e]&&c[c.length-1]==e&&l(0,e),(a=m[e]||!!a)||c.push(e),o.start&&(r=[],n.replace(h,function(t,e){var n=arguments[2]||arguments[3]||arguments[4]||(b[e]?e:"");r.push({name:e,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})}),o.start)&&o.start(e,r,a)}function l(t,e){if(e)for(n=c.length-1;0<=n&&c[n]!=e;n--);else var n=0;if(0<=n){for(var a=c.length-1;n<=a;a--)o.end&&o.end(c[a]);c.length=n}}l()},s.HTMLtoXML=function(t){var r="";return s.HTMLParser(t,{start:function(t,e,n){r+="<"+t;for(var a=0;a<e.length;a++)r+=" "+e[a].name+'="'+e[a].escaped+'"';r+=">"},end:function(t){r+="</"+t+">"},chars:function(t){r+=t},comment:function(t){r+="\x3c!--"+t+"--\x3e"}}),r},s.HTMLtoDOM=function(t,o){var e,n,c=r("html,head,body,title"),i={link:"head",base:"head"},l=(o?o=o.ownerDocument||o.getOwnerDocument&&o.getOwnerDocument()||o:"undefined"!=typeof DOMDocument?o=new DOMDocument:"undefined"!=typeof document&&document.implementation&&document.implementation.createDocument?o=document.implementation.createDocument("","",null):"undefined"!=typeof ActiveX&&(o=new ActiveXObject("Msxml.DOMDocument")),[]);if(!(o.documentElement||o.getDocumentElement&&o.getDocumentElement())&&o.createElement&&(e=o.createElement("html"),(n=o.createElement("head")).appendChild(o.createElement("title")),e.appendChild(n),e.appendChild(o.createElement("body")),o.appendChild(e)),o.getElementsByTagName)for(var a in c)c[a]=o.getElementsByTagName(a)[0];var d=c.body;return s.HTMLParser(t,{start:function(t,e,n){if(c[t])d=c[t],n||l.push(d);else{var a,r=o.createElement(t);for(a in e)r.setAttribute(e[a].name,e[a].value);i[t]&&"boolean"!=typeof c[i[t]]?c[i[t]].appendChild(r):d&&d.appendChild&&d.appendChild(r),n||(l.push(r),d=r)}},end:function(t){--l.length,d=l[l.length-1]},chars:function(t){d.appendChild(o.createTextNode(t))},comment:function(t){}}),o},s.HTMLtoJSON=function(t){t=t.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*\>\n/,"").replace(/<!DOCTYPE.*\>\n/,"");var a=[],r={node:"root",child:[]};return s.HTMLParser(t,{start:function(t,e,n){t={node:"element",tag:t};0!==e.length&&(t.attr=e.reduce(function(t,e){var n=e.name,e=e.value;return e.match(/ /)&&(e=e.split(" ")),t[n]?Array.isArray(t[n])?t[n].push(e):t[n]=[t[n],e]:t[n]=e,t},{})),n?(void 0===(e=a[0]||r).child&&(e.child=[]),e.child.push(t)):a.unshift(t)},end:function(t){var e=a.shift();e.tag!==t&&console.error("invalid state: mismatch end tag"),(0===a.length?r:(void 0===(t=a[0]).child&&(t.child=[]),t)).child.push(e)},chars:function(t){var e,t={node:"text",text:t};(0===a.length?r:(void 0===(e=a[0]).child&&(e.child=[]),e)).child.push(t)},comment:function(t){var t={node:"comment",text:t},e=a[0];void 0===e.child&&(e.child=[]),e.child.push(t)}}),r},s.JSONtoHTML=function(n){var t,e="",a=(n.child&&(e=n.child.map(function(t){return s.JSONtoHTML(t)}).join("")),"");return n.attr&&""!==(a=Object.keys(n.attr).map(function(t){var e=n.attr[t];return t+"="+l(e=Array.isArray(e)?e.join(" "):e)}).join(" "))&&(a=" "+a),"element"===n.node?(t=n.tag,-1<["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed"].indexOf(t)?"<"+n.tag+a+"/>":"<"+n.tag+a+">"+e+("</"+n.tag+">")):"text"===n.node?n.text:"comment"===n.node?"\x3c!--"+n.text+"--\x3e":"root"===n.node?e:void 0},s.JSONtoWXML=function(t){if("text"==t.node)return/^\s+$/.test(t.text)?"":"<text>".concat(t.text,"</text>");var e="",o=(t.child&&(e=t.child.map(function(t){return s.JSONtoWXML(t)}).join("")),["id","class","style","src"]),n=["value","type","password","placeholder","disabled","maxlength","focus","cursor","class","id"];if("root"===t.node)return e;if("comment"===t.node)return"\x3c!--"+t.text+"--\x3e";if("element"!=t.node)return e;if("img"==t.tag)return a=c(t.attr),"<image".concat(a,"></image>");if("input"!=t.tag)return"button"==t.tag?i(t):"form"==t.tag?(a=c(t.attr),"<form".concat(a,">").concat(e,"</form>")):(t.child&&1==t.child.length&&"text"==t.child[0].node&&(e=t.child[0].text),"label"==t.tag?(a=c(t.attr,["for"]),"<label".concat(a,">").concat(e,"</label>")):"style"==t.tag?(a=c(t.attr,["type","lang","scoped"]),"<style".concat(a,">").concat(e,"</style>")):"script"==t.tag?(a=c(t.attr,["type","lang","src"]),"<script".concat(a,">").concat(e,"<\/script>")):"textarea"==t.tag?(t.attr.vlaue=e,a=c(t.attr,n),"<textarea".concat(a,"/>")):"a"==t.tag?(a=c(t.attr,["id","class"]),t.attr&&t.attr.href&&(a+=" url="+l(t.attr.href)),"<navigator".concat(a,">").concat(e,"</navigator>")):(a=c(t.attr),0<=["i","span","strong","block","font"].indexOf(t.tag)&&(!t.child||1==t.child.length&&"text"==t.child[0].node)?"<text".concat(a,">").concat(e,"</text>"):"<view".concat(a,">").concat(e,"</view>")));var a=t;if(a.attr||(a.attr={type:"text"}),"password"==a.attr.type&&(a.attr.type="text",a.attr.password="true"),0<=["button","reset","submit"].indexOf(a.attr.type))return a.text=a.attr.value,a.tag="button",i(a);if("checkbox"==a.attr.type)return r=c(a.attr,["value","checked","class","id"]),"<checkbox".concat(r,"/>");if("radio"==a.attr.type)return r=c(a.attr,["value","checked","class","id"]),"<radio".concat(r,"/>");["text","number","idcard","digit"].indexOf(a.attr.type)<0&&(a.attr.type="text");var r=c(a.attr,n);return"<input".concat(r,"/>");function c(t,e){void 0===e&&(e=o);var n,a="";if(t)for(var r in t)t.hasOwnProperty(r)&&0<=e.indexOf(r)&&(n=t[r],a+=" "+r+"="+l(n=Array.isArray(n)?n.join(" "):n));return a}function i(t){var e=c(t.attr);return t.attr&&0<=["reset","submit"].indexOf(t.attr.type)&&(e+=" form-type="+l(t.attr.type)),'<button type="default"'.concat(e,">").concat(t.text,"</button>")}},s.HTMLtoWXML=function(t){return t?(t=s.HTMLtoJSON(t),s.JSONtoWXML(t)):(console.log("please input html content!!!"),0)}})(this);