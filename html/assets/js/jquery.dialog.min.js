var DialogType,DialogDirection,DialogStatus,DialogDiskType,__extends=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,o=0,i=arguments.length;o<i;o++)t+=arguments[o].length;var e=Array(t),n=0;for(o=0;o<i;o++)for(var s=arguments[o],a=0,r=s.length;a<r;a++,n++)e[n]=s[a];return e},CacheUrl=function(){function t(){}return t.hasData=function(t){return this._cacheData.hasOwnProperty(t)},t.hasEvent=function(t){return this._event.hasOwnProperty(t)},t.addEvent=function(t,o){this.hasEvent(t)?this._event[t].push(o):this._event[t]=[o]},t.getData=function(o,t){if(this.hasData(o))t(this._cacheData[o]);else if(this.hasEvent(o))this._event[o].push(t);else{this._event[o]=[t];var i=this;$.getJSON(o,function(t){0!=t.code?console.log("URL ERROR! "+o):i.setData(o,t.data)})}},t.setData=function(t,o){this._cacheData[t]=o,this.hasEvent(t)&&(this._event[t].forEach(function(t){t(o)}),delete this._event[t])},t._cacheData={},t._event={},t}(),Eve=function(){function t(){}return t.prototype.on=function(t,o){return this.options["on"+t]=o,this},t.prototype.hasEvent=function(t){return this.options.hasOwnProperty("on"+t)},t.prototype.trigger=function(t){for(var o,i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];var n="on"+t;if(this.hasEvent(t))return(o=this.options[n]).call.apply(o,__spreadArrays([this],i))},t}(),Box=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.showPosition=function(){return this.setPosition(),this.box.show(),this},o.prototype.setPosition=function(){var t=this.element.offset(),o=t.left,i=this.box.outerWidth(),e=$(window).scrollLeft()+$(window).width();e-i<o&&e<o+i&&(o=e-i);var n=this.box.outerHeight(),s=$(window).scrollTop(),a=$(window).height(),r=this.element.outerHeight(),h=t.top+r;return s+a<h+n&&t.top-n>s&&(h=t.top-n),this.box.css({left:o+"px",top:h+"px"}),this},o.getReal=function(t,o){return 1<o?o:t*o},o}(Eve),DialogCore=function(e){function t(t,o){var i=e.call(this)||this;return i.id=o,i._status=DialogStatus.closed,i.options=$.extend({},i.getDefaultOption(),t),i.options.type=Dialog.parseEnum(i.options.type,DialogType),i}return __extends(t,e),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},set:function(t){if(t=Dialog.parseEnum(t,DialogStatus),this._status!=t)switch(t){case DialogStatus.show:this.showBox();break;case DialogStatus.hide:this.hideBox();break;case DialogStatus.closing:this.options.closeAnimate?this.closingBox():this.closeBox();break;case DialogStatus.closed:this.closeBox();break;default:throw"status error:"+t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y||(this._y=this.box.offset().top-$(window).scrollTop()),this._y},set:function(t){this._y=t,this.css("top",t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height||(this._height=this.box.height()),this._height},set:function(t){this._height=t,this.box.height(t)},enumerable:!0,configurable:!0}),t.prototype.changeStatus=function(t){this._status=t},t.prototype.getDefaultOption=function(){return new DefaultDialogOption},t.prototype.showBox=function(){return this.box||this.init(),0==this.trigger(_DIALOG_SHOW)?(console.log("show stop!"),!1):(this.doShowStatus(),!0)},t.prototype.doShowStatus=function(){this.box.show(),this._status=DialogStatus.show,this.box.trigger(DIALOG_SHOW,this)},t.prototype.hideBox=function(){return this.box||this.init(),0==this.trigger(_DIALOG_HIDE)?(console.log("hide stop!"),!1):(this.doHideStatus(),!0)},t.prototype.doHideStatus=function(){this.box.hide(),this._status=DialogStatus.hide,this.box.trigger(DIALOG_HIDE)},t.prototype.closingBox=function(){return!!this.box&&(this.status!=DialogStatus.closing&&this.status!=DialogStatus.closed&&(0==this.trigger(_DIALOG_CLOSING)?(console.log("closing stop!"),!1):(this.doClosingStatus(),!0)))},t.prototype.doClosingStatus=function(){this._status=DialogStatus.closing,this.box.trigger(DIALOG_CLOSING,this);var t=this;this.box.addClass("dialog-closing").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.status==DialogStatus.closing&&t.closeBox()})},t.prototype.closeBox=function(){return!!this.box&&(0==this.trigger(_DIALOG_CLOSE)?(console.log("closed stop!"),!1):(this.doCloseStatus(),!0))},t.prototype.doCloseStatus=function(){this._status=DialogStatus.closed,this._dialogBg&&(this._dialogBg.remove(),this._dialogBg=void 0),Dialog.removeItem(this.id),this.box.trigger(DIALOG_CLOSE),this.box.remove(),this.box=void 0},t.prototype.createCore=function(){return this.box&&0<this.box.length||(this.box=$('<div class="dialog dialog-'+DialogType[this.options.type]+'" data-type="dialog" dialog-id='+this.id+"></div>")),this},t.prototype.css=function(t,o){return this.box.css(t,o),this},t.prototype.show=function(){return this.status=DialogStatus.show,this},t.prototype.hide=function(){return this.status=DialogStatus.hide,this},t.prototype.close=function(t){return void 0===t&&(t=!0),this.status==DialogStatus.closing||this.status==DialogStatus.closed||(this.status=t?DialogStatus.closing:DialogStatus.closed),this},t.prototype.toggle=function(){return this.status!=DialogStatus.show?this.show():this.hide()},t.prototype.getDialogTop=function(){var o,i=this,e=this;return Dialog.map(function(t){t.options.type==i.options.type&&t.id!=e.id&&(!o||t.y<o)&&(o=t.y)}),o},t.prototype.getDialogBottom=function(){var i,e=this,n=this;return Dialog.map(function(t){if(t.options.type==e.options.type&&t.id!=n.id){var o=t.y+t.height;(!i||i<o)&&(i=o)}}),i},t.prototype._getBottom=function(){return Math.max(.33*$(window).height()-this.height/2,0)},t.prototype._getTop=function(){return Math.max($(window).height()/2-this.height/2,0)},t.prototype._getLeft=function(){return Math.max($(window).width()/2-this.box.width()/2,0)},t.prototype._getRight=function(){return Math.max($(window).width()/2-this.box.width()/2,0)},t.prototype._getWidth=function(){var t=Dialog.$window.width();return 1<this.options.width?t:t*this.options.width},t.prototype._getHeight=function(){var t=Dialog.$window.height();return 1<this.options.height?t:t*this.options.height},t.prototype._getLeftTop=function(t,o,i,e,n){switch(t){case DialogDirection.leftTop:return[0,0];case DialogDirection.top:return[(n-o)/2,0];case DialogDirection.rightTop:return[n-o,0];case DialogDirection.right:return[n-o,(n-i)/2];case DialogDirection.rightBottom:return[n-o,n-i];case DialogDirection.bottom:return[(n-o)/2,n-i];case DialogDirection.leftBottom:return[0,n-i];case DialogDirection.left:return[0,(n-i)/2];case DialogDirection.center:default:return[(n-o)/2,(n-i)/2]}},t.prototype.top=function(t){return t?this.css("top",t+"px"):this.box.offset().top},t.prototype.left=function(t){return t?this.css("left",t+"px"):this.box.offset().left},t.prototype.width=function(t){return t?this.css("width",t+"px"):this.box.width()},t.prototype.addClass=function(t){return this.box.addClass(t),this},t.prototype.hasClass=function(t){return this.box.hasClass(t)},t.prototype.removeClass=function(t){return this.box.removeClass(t),this},t.prototype.find=function(t){return this.box.find(t)},t.prototype.isElement=function(t){return"object"==typeof t&&(t instanceof $||t instanceof HTMLDivElement)},t}(Box),DefaultDialogOption=function(){this.title="提示",this.type=DialogType.tip,this.canMove=!0,this.closeAnimate=!0,this.ondone=function(){this.close()}},Dialog=function(){function t(){}return t.create=function(t){return t.type||(t.type=DialogType.tip),t.type=this.parseEnum(t.type,DialogType),new(this.getMethod(t.type))(t)},t.bind=function(t){var o=DialogType.box;t.hasClass("dialog-content")?o=DialogType.content:t.hasClass("dialog-form")?o=DialogType.form:t.hasClass("dialog-image")?o=DialogType.image:!t.hasClass("dialog-box")&&t.hasClass("dialog-page")&&(o=DialogType.page);var i=new(this.getMethod(o))({type:o});return i.box=t,i.init(),i},t.parseEnum=function(t,o){return"string"==typeof t?o[t]:t},t.tip=function(t,o){return void 0===o&&(o=2e3),"object"!=typeof t&&(t={content:t,time:o}),t.type=DialogType.tip,this.create(t).show()},t.message=function(t,o){return void 0===o&&(o=2e3),"object"!=typeof t&&(t={content:t,time:o}),t.type=DialogType.message,this.create(t).show()},t.pop=function(t,o,i){return void 0===i&&(i=2e3),"object"!=typeof t&&(t={content:t,time:i,target:o}),t.type=DialogType.pop,this.create(t).show()},t.loading=function(t){return void 0===t&&(t=0),"object"!=typeof t&&(t={time:t}),t.type=DialogType.loading,this.create(t).show()},t.content=function(t,o,i){return"object"!=typeof t&&(t={content:t+"",hasYes:o,hasNo:i}),t.type=DialogType.content,this.create(t).show()},t.box=function(t,o,i,e){return void 0===o&&(o="提示"),("object"!=typeof t||t instanceof Array)&&(t={content:t+"",title:o,hasYes:i,hasNo:e}),t.type=DialogType.box,this.create(t).show()},t.form=function(t,o,i,e,n){return void 0===o&&(o="提示"),this.create({type:DialogType.form,content:t||"",title:o,hasYes:e,hasNo:n,ondone:i}).show()},t.page=function(t,o,i,e){return void 0===o&&(o="提示"),"object"!=typeof t&&(t={content:t+"",title:o,hasYes:i,hasNo:e}),t.type=DialogType.page,this.create(t).show()},t.notify=function(t,o,i){return void 0===t&&(t="通知"),void 0===o&&(o=""),void 0===i&&(i=""),"object"!=typeof t&&(t={title:t,content:o,ico:i}),t.type=DialogType.notify,this.create(t).show()},t.addItem=function(t){(this._data[++this._guid]=t).id=this._guid},t.hasItem=function(t){return void 0===t&&(t=this._guid),this._data.hasOwnProperty(t+"")},t.get=function(t){if(void 0===t&&(t=this._guid),this.hasItem(t))return this._data[t];throw"error:"+t},t.removeItem=function(t){void 0===t&&(t=this._guid),this.hasItem(t)&&(this._data[t].close(),delete this._data[t])},t.remove=function(){this.map(function(t){t.close()}),0<this._bgLock&&(this._bgLock=0,this.closeBg())},t.map=function(t){for(var o in this._data){if(this.hasItem(o))if(0==t(this._data[o]))return}},t.showBg=function(t,o){void 0===t&&(t=$(document.body)),void 0===o&&(o=!0);var i=this;this._dialogBg||(this._dialogBg=$('<div class="dialog-bg"></div>'),this._dialogBg.click(function(t){t.stopPropagation(),i.remove()})),t.append(this._dialogBg),this._dialogBg.toggleClass("dialog-bg-private",!o),this._bgLock++,this._dialogBg.show()},t.closeBg=function(){this._dialogBg&&(this._bgLock--,0<this._bgLock||(this._dialogBg.hide(),this._bgLock=0))},t.addMethod=function(t,o){this.methods[t]=o},t.hasMethod=function(t){return this.methods.hasOwnProperty(t.toString())},t.getMethod=function(t){return this.methods[t]},t.methods={},t._data={},t._guid=0,t._tipData=[],t._bgLock=0,t.$window=$(window),t}();!function(t){t[t.tip=0]="tip",t[t.message=1]="message",t[t.notify=2]="notify",t[t.pop=3]="pop",t[t.loading=4]="loading",t[t.select=5]="select",t[t.image=6]="image",t[t.disk=7]="disk",t[t.form=8]="form",t[t.content=9]="content",t[t.box=10]="box",t[t.page=11]="page"}(DialogType||(DialogType={})),function(t){t[t.top=0]="top",t[t.right=1]="right",t[t.bottom=2]="bottom",t[t.left=3]="left",t[t.center=4]="center",t[t.leftTop=5]="leftTop",t[t.rightTop=6]="rightTop",t[t.rightBottom=7]="rightBottom",t[t.leftBottom=8]="leftBottom"}(DialogDirection||(DialogDirection={})),function(t){t[t.hide=0]="hide",t[t.show=1]="show",t[t.closing=2]="closing",t[t.closed=3]="closed"}(DialogStatus||(DialogStatus={})),function(t){t[t.file=0]="file",t[t.directory=1]="directory"}(DialogDiskType||(DialogDiskType={}));var DIALOG_SHOW="dialog_show",DIALOG_HIDE="dialog_hide",DIALOG_CLOSE="dialog_close",DIALOG_CLOSING="dialog_closing",DIALOG_LOADED="dialog_loaded",DIALOG_ASYNC="dialog_async",DIALOG_DONE="dialog_done",_DIALOG_DONE="done",_DIALOG_CANCEL="cancel",_DIALOG_SHOW="show",_DIALOG_HIDE="hide",_DIALOG_CLOSE="closed",_DIALOG_CLOSING="closing",DialogPlugin=function(){function t(t,o){this.element=t,this.option=o;var i=this;this.element.click(function(){i.getDialog($(this)).show()})}return t.prototype.getDialog=function(t){return this.dialog&&this.dialog.box?this.dialog:this.dialog=Dialog.create(this._parseOption(t))},t.prototype._parseOption=function(t){var o=$.extend({},this.option);return t&&(o.type=Dialog.parseEnum(t.attr("dialog-type")||this.option.type,DialogType),o.content=t.attr("dialog-content")||this.option.content,o.content||(o.content=""),o.url=t.attr("dialog-url")||this.option.url,o.time=parseInt(t.attr("dialog-time"))||this.option.time,o.type!=DialogType.pop||o.target||(o.target=t)),o},t.prototype.close=function(){return this.dialog&&(this.dialog.close(),this.dialog=void 0),this},t.prototype.show=function(){return this.getDialog().show(),this},t.prototype.hide=function(){return this.getDialog().hide(),this},t.prototype.toggle=function(){return this.getDialog().toggle(),this},t.prototype.find=function(t){return this.getDialog().find(t)},t.prototype.on=function(t,o){return this.getDialog().on(t,o),this},t}();jQuery.fn.dialog=function(t){return"dialog"==this.attr("data-type")?Dialog.bind(this):new DialogPlugin(this,t)};var DialogTip=function(i){function t(t,o){return i.call(this,t,o)||this}return __extends(t,i),t.prototype.init=function(){Dialog.addItem(this),this.createCore().createContent().appendParent().setProperty().bindEvent().addTime()},t.prototype.getDefaultOption=function(){return new DefaultDialogTipOption},t.prototype.createContent=function(){return this.box.text(this.options.content),this},t.prototype.appendParent=function(){return this.box&&(this.options.target?(this.options.target.append(this.box),this.box.addClass("dialog-private")):$(document.body).append(this.box)),this},t.prototype.setProperty=function(){var t=Dialog.$window.width(),o=this.box.width();return this.y=(this.getDialogTop()||.68*Dialog.$window.height()+30)-30-this.height,this.css("left",(t-o)/2+"px"),this},t.prototype.bindEvent=function(){this.box.click(function(t){t.stopPropagation()});var t=this;return $(window).resize(function(){t.box&&t.resize()}),this},t.prototype.resize=function(){var t=Dialog.$window.width(),o=this.box.width();this.css("left",(t-o)/2+"px"),this.trigger("resize")},t.prototype.addTime=function(){if(!(this.options.time<=0)){var t=this;this._timeHandle=setTimeout(function(){t._timeHandle=void 0,t.close()},this.options.time)}},t.prototype.stopTime=function(){this._timeHandle&&(clearTimeout(this._timeHandle),this._timeHandle=void 0)},t.prototype.closingBox=function(){return!!i.prototype.closingBox.call(this)&&(this.stopTime(),!0)},t.prototype.closeBox=function(){return!!i.prototype.closeBox.call(this)&&(this.changeOther(),this.stopTime(),!0)},t.prototype.changeOther=function(){var o=this;Dialog.map(function(t){t.options.type!=DialogType.tip||t.y>=o.y||(t.y+=o.height+30)})},t}(DialogCore),DefaultDialogTipOption=function(){this.time=2e3};Dialog.addMethod(DialogType.tip,DialogTip);var DialogMessage=function(i){function t(t,o){return i.call(this,t,o)||this}return __extends(t,i),t.prototype.setProperty=function(){return this.height,this.y=(this.getDialogBottom()||.1*Dialog.$window.height()-30)+30,this},t.prototype.bindEvent=function(){return this},t.prototype.changeOther=function(){var o=this;Dialog.map(function(t){t.options.type!=DialogType.message||t.y<=o.y||(t.y-=o.height+30)})},t}(DialogTip);Dialog.addMethod(DialogType.message,DialogMessage);var DialogNotify=function(i){function t(t,o){return i.call(this,t,o)||this}return __extends(t,i),t.prototype.createContent=function(){throw new Error("Method not implemented.")},t.prototype.setProperty=function(){throw new Error("Method not implemented.")},t.prototype.getDefaultOption=function(){return new DefaultDialogNotifyOption},t.prototype.showBox=function(){return!this.notify&&(Dialog.addItem(this),this._createNotify(),!0)},t.prototype.hideBox=function(){return this.closeBox()},t.prototype.closingBox=function(){return this.closeBox()},t.prototype.closeBox=function(){return this.status!=DialogStatus.closing&&this.status!=DialogStatus.closed&&(0==this.trigger(_DIALOG_CLOSE)?(console.log("closed stop!"),!1):(this._closeNotify(),Dialog.removeItem(this.id),this.changeStatus(DialogStatus.closed),this.stopTime(),!0))},t.prototype._createNotify=function(){var o=this;"Notification"in window?Notification.requestPermission().then(function(t){"granted"!==t&&console.log("您的浏览器支持但未开启桌面提醒！"),o.notify=new Notification(o.options.title,{body:o.options.content,icon:o.options.ico}),o.notify.addEventListener("click",function(t){o.trigger(_DIALOG_DONE)})}):console.log("您的浏览器不支持桌面提醒！")},t.prototype._closeNotify=function(){this.notify&&(this.notify.close(),this.notify=void 0)},t}(DialogTip),DefaultDialogNotifyOption=function(o){function t(){var t=null!==o&&o.apply(this,arguments)||this;return t.title="提示",t}return __extends(t,o),t}(DefaultDialogTipOption);Dialog.addMethod(DialogType.notify,DialogNotify);var DialogPop=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i.options.direction&&(i.options.direction=Dialog.parseEnum(i.options.direction,DialogDirection)),i}return __extends(t,e),t.prototype.setProperty=function(){return this._setPopProperty(),this},t.prototype.appendParent=function(){return this.box&&$(document.body).append(this.box),this},t.prototype.bindEvent=function(){return this},t.prototype._getRandomDirection=function(){return Math.floor(8*Math.random())},t.prototype._setPopProperty=function(){this.options.direction||(this.options.direction=this._getRandomDirection()),this.box.addClass("dialog-pop-"+DialogDirection[this.options.direction]);var t=this.options.target.offset(),o=this._getPopLeftTop(Dialog.parseEnum(this.options.direction,DialogCore),this.box.outerWidth(),this.box.outerHeight(),t.left,t.top,this.options.target.outerWidth(),this.options.target.outerHeight()),i=o[0],e=o[1];this.box.css({left:i+"px",top:e+"px"})},t.prototype._getPopLeftTop=function(t,o,i,e,n,s,a){switch(t){case DialogDirection.rightTop:case DialogDirection.right:return[e+s+30,n+(a-i)/2];case DialogDirection.rightBottom:case DialogDirection.bottom:return[e+(s-o)/2,n+a+30];case DialogDirection.leftBottom:case DialogDirection.left:return[e-o-30,n+(a-i)/2];case DialogDirection.center:case DialogDirection.leftTop:case DialogDirection.top:default:return[e+(s-o)/2,n-i-30]}},t}(DialogTip);Dialog.addMethod(DialogType.pop,DialogPop);var DialogLoading=function(i){function t(t,o){return i.call(this,t,o)||this}return __extends(t,i),t.prototype.getDefaultOption=function(){return new DefaultDialogLoadingOption},t.prototype.createContent=function(){return this.box.html(this._getLoading()),this},t.prototype.setProperty=function(){var t=this.options.target||Dialog.$window,o=t.width(),i=this.box.width(),e=t.height(),n=this.box.height();return this.css({left:(o-i)/2+"px",top:(e-n)/2+"px"}),this},t.prototype._getLoading=function(){for(var t="",o=this.options.count;0<o;o--)t+="<span></span>";return'<div class="'+this.options.extra+'">'+t+"</div>"},t.prototype.showBox=function(){return!!i.prototype.showBox.call(this)&&(this.options.target?Dialog.showBg(this.options.target,!1):Dialog.showBg(),!0)},t.prototype.hideBox=function(){return!!i.prototype.hideBox.call(this)&&(Dialog.closeBg(),!0)},t.prototype.closingBox=function(){return!!i.prototype.closingBox.call(this)&&(Dialog.closeBg(),!0)},t.prototype.closeBox=function(){var t=this.status;return!!i.prototype.closeBox.call(this)&&(t!=DialogStatus.closing&&Dialog.closeBg(),!0)},t}(DialogTip),DefaultDialogLoadingOption=function(){this.extra="loading",this.count=5,this.time=0};Dialog.addMethod(DialogType.loading,DialogLoading);var DialogContent=function(n){function t(t,o){var i=n.call(this,t,o)||this;if(i._isLoading=!1,!i.options.content&&i.options.url){var e=i;i.isLoading=!0,$.get(i.options.url,function(t){e.options.content=t,e.isLoading=!1,e.init(),e.find(".dialog-body").children().trigger(DIALOG_LOADED,e)})}return i}return __extends(t,n),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._isLoading},set:function(t){this._isLoading=t,this._toggleLoading()},enumerable:!0,configurable:!0}),t.prototype._toggleLoading=function(t){void 0===t&&(t=this.status),this.isLoading&&t==DialogStatus.show?this._loadingDialog?this._loadingDialog.show():this._loadingDialog=Dialog.loading().show():this._loadingDialog&&(this._loadingDialog.close(),this._loadingDialog=void 0)},t.prototype.isFixedBox=function(){return void 0===this.options.content},t.prototype.init=function(){Dialog.addItem(this),this.isFixedBox()?this.setProperty().bindEvent():(this.createCore().createContent().appendParent().setProperty().bindEvent(),this.isElement(this.options.content)&&this.box.find(".dialog-body").empty().append(this.options.content),this.status==DialogStatus.show&&this.showBox())},t.prototype.getDefaultOption=function(){return new DefaultDialogContentOption},t.prototype.createContent=function(){return this.box.html(this.getContentHtml()+this.getFooterHtml()),this},t.prototype.appendParent=function(){return $(document.body).append(this.box),this},t.prototype.setProperty=function(){return this},t.prototype.bindEvent=function(){this.trigger("init",this);var e=this;return this.box.click(function(t){t.stopPropagation()}).on(DIALOG_DONE,function(t,o,i){e.hasEvent(_DIALOG_DONE)?e.trigger(_DIALOG_DONE,o,i):(i(e),e.close())}).on(DIALOG_ASYNC,function(t,o){o(e)}),this.onClick(".dialog-yes",function(){this.hasEvent(_DIALOG_DONE)?this.trigger(_DIALOG_DONE):this.close()}).onClick(".dialog-close",function(){this.close(),this.hasEvent(_DIALOG_CANCEL)&&this.trigger(_DIALOG_CANCEL)}),this},t.prototype.getContentHtml=function(){var t=this.isElement(this.options.content)?"":this.options.content;return"object"==typeof t&&(t=JSON.stringify(t)),'<div class="dialog-body">'+t+"</div>"},t.prototype.getFooterHtml=function(){if(!this.options.hasYes&&!this.options.hasNo&&"object"==typeof this.options.button&&this.options.button instanceof Array&&0==this.options.button.length)return"";var i='<div class="dialog-footer">';return this.options.hasYes&&(i+='<button type="button" class="dialog-yes">'+("string"==typeof this.options.hasYes?this.options.hasYes:"确认")+"</button>"),this.options.hasNo&&(i+='<button type="button" class="dialog-close">'+("string"==typeof this.options.hasNo?this.options.hasNo:"取消")+"</button>"),"string"==typeof this.options.button&&(this.options.button=[this.options.button]),$.each(this.options.button,function(t,o){i+="string"!=typeof o?'<button type="button" class="'+o.tag+'">'+o.content+"</button>":'<button type="button">'+o+"</button>"}),i+="</div>"},t.prototype.onClick=function(t,o){var i=this;return this.box.on("click",t,function(t){o.call(i,$(this))}),this},t.prototype.showBox=function(){return this.isLoading?(this.changeStatus(DialogStatus.show),!1):!!n.prototype.showBox.call(this)&&(Dialog.showBg(this.options.target),!0)},t.prototype.hideBox=function(){return this.isLoading?(this.changeStatus(DialogStatus.hide),!1):!!n.prototype.hideBox.call(this)&&(Dialog.closeBg(),!0)},t.prototype.closingBox=function(){return this.isLoading?(this.changeStatus(DialogStatus.hide),!1):!!n.prototype.closingBox.call(this)&&(Dialog.closeBg(),!0)},t.prototype.closeBox=function(){if(this.isLoading)return this.changeStatus(DialogStatus.hide),!1;if(this.isFixedBox())return this.hide(),!0;var t=this.status;return!!n.prototype.closeBox.call(this)&&(t!=DialogStatus.closing&&Dialog.closeBg(),!0)},t}(DialogCore),DefaultDialogContentOption=function(){this.hasYes=!0,this.hasNo=!0,this.time=0,this.button=[]};Dialog.addMethod(DialogType.content,DialogContent);var DialogBox=function(s){function t(t,o){return s.call(this,t,o)||this}return __extends(t,s),t.prototype.createContent=function(){return this.box.html(this.getHeaderHtml()+this.getContentHtml()+this.getFooterHtml()),this},t.prototype.setProperty=function(){var t=this.options.target||Dialog.$window,o=t.width(),i=this.box.width(),e=t.height(),n=this.box.height();return i<o&&n<e?this.css({left:(o-i)/2+"px",top:(e-n)/2+"px"}).removeClass("dialog-page"):(this.options.type=DialogType.page,this.box.addClass("dialog-page").css({left:0,top:0}),Dialog.closeBg()),this},t.prototype.bindEvent=function(){var o,i,e=this,n=!1;return this.box.find(".dialog-header .dialog-title").mousedown(function(t){n=!0,o=t.pageX-parseInt(e.box.css("left")),i=t.pageY-parseInt(e.box.css("top")),e.box.fadeTo(20,.5)}),$(document).mousemove(function(t){n&&e.status==DialogStatus.show&&e.box.css({top:t.pageY-i,left:t.pageX-o})}).mouseup(function(){n=!1,e.box&&e.status==DialogStatus.show&&e.box.fadeTo("fast",1)}),$(window).resize(function(){e.box&&e.resize()}),s.prototype.bindEvent.call(this)},t.prototype.resize=function(){this.setProperty(),this.trigger("resize")},t.prototype.showCenter=function(){var t=Math.max(($(window).width()-this.box.width())/2,0),o=Math.max(($(window).height()-this.box.height())/2,0);return this.css({left:t+"px",top:o+"px"}).show()},t.prototype.getDefaultOption=function(){return new DefaultDialogBoxOption},t.prototype.getHeaderHtml=function(){var t='<div class="dialog-header"><div class="dialog-title">';return this.options.ico&&(t+='<i class="fa fa-'+this.options.ico+'"></i>'),this.options.title&&(t+=this.options.title),t+'</div><i class="fa fa-close dialog-close"></i></div>'},t}(DialogContent),DefaultDialogBoxOption=function(o){function t(){var t=null!==o&&o.apply(this,arguments)||this;return t.title="提示",t.canMove=!0,t}return __extends(t,o),t}(DefaultDialogContentOption);Dialog.addMethod(DialogType.box,DialogBox);var DialogForm=function(i){function t(t,o){return i.call(this,t,o)||this}return __extends(t,i),Object.defineProperty(t.prototype,"data",{get:function(){return this._data||(this._data=this._getFormData()),this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements||(this._elements=this._getFormElement()),this._elements},enumerable:!0,configurable:!0}),t.prototype.getContentHtml=function(){return'<div class="dialog-body">'+this._createForm(this.options.content)+"</div>"},t.prototype._createForm=function(t){if("object"!=typeof t)return t;var i="",e=this;return $.each(t,function(t,o){i+=e._createInput(t,o)}),i},t.prototype._createInput=function(i,e){"object"!=typeof e&&(e={label:e}),e.type||(e.type=e.item?"select":"text");var t="",n="",s="";switch(e.default&&(s=e.default),e.value&&(s=e.value),e.label&&(n+="<label>"+e.label+"</label>"),e.id&&(t+=' id="'+e.id+'"'),e.class&&(t+=' class="'+e.class+'"'),e.style&&(t+=' style="'+e.style+'"'),e.required&&(t+=' required="required"'),e.placeholder&&(t+=' placeholder="'+e.placeholder+'"'),e.type){case"textarea":n+='<textarea name="'+i+'" '+t+">"+s+"</textarea>";break;case"select":var a="";$.each(e.item,function(t,o){t==s&&(t+='" selected="selected'),a+='<option value="'+t+'">'+o+"</option>"}),n+='<select name="'+i+'" '+t+">"+a+"<select>";break;case"radio":case"checkbox":n+="<div"+t+">",$.each(e.item,function(t,o){t==s&&(t+='" checked="checked'),n+='<input type="'+e.type+'" name="'+i+'" value="'+t+'">'+o}),n+="<div>";break;default:n+='<input type="'+e.type+'" name="'+i+'" '+t+' value="'+s+'">'}return'<div class="input-group">'+n+"</div>"},t.prototype._getFormElement=function(){var n={};return this.box.find("input,select,textarea,button").each(function(t,o){var i=$(o),e=i.attr("name");e&&(!i.is("[type=ridio]")&&!i.is("[type=checkbox]")&&e.indexOf("[]")<0?n[e]=i:n.hasOwnProperty(e)?n[e].push(o):n[e]=i)}),n},t.prototype._getFormData=function(){var a={};return $.each(this.elements,function(e,t){if(t.is("[type=ridio]"))t.each(function(t,o){var i=$(o);i.attr("checked")&&(a[e]=i.val())});else{if(t.is("[type=checkbox]")){var n=[];return t.each(function(t,o){var i=$(o);i.attr("checked")&&n.push(i.val())}),void(a[e]=n)}if(0<e.indexOf("[]")){var s=[];return t.each(function(t,o){var i=$(o);s.push(i.val())}),void(a[e]=s)}a[e]=t.val()}}),a},t}(DialogBox);Dialog.addMethod(DialogType.form,DialogForm);var DialogPage=function(i){function t(t,o){return i.call(this,t,o)||this}return __extends(t,i),t.prototype.getHeaderHtml=function(){var t='<div class="dialog-header"><i class="fa fa-arrow-left"></i><div class="dialog-title">';return this.options.ico&&(t+='<i class="fa fa-'+this.options.ico+'"></i>'),this.options.title&&(t+=this.options.title),t+'</div><i class="fa fa-close dialog-close"></i></div>'},t.prototype.bindEvent=function(){return this.box.click(function(t){t.stopPropagation()}),this.onClick(".dialog-header .fa-arrow-left",function(){this.close()}),this.onClick(".dialog-yes",function(){this.trigger("done")}),this.onClick(".dialog-close",function(){this.close()}),this},t}(DialogBox);Dialog.addMethod(DialogType.page,DialogPage);var DialogImage=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i._index=0,i}return __extends(t,e),Object.defineProperty(t.prototype,"src",{get:function(){return this._src},set:function(t){t||(t=this.options.content),this._src=t,this._img.attr("style","").attr("src",t)},enumerable:!0,configurable:!0}),t.prototype.init=function(){Dialog.addItem(this),this.createCore().createContent().appendParent().setProperty().bindEvent(),this.status==DialogStatus.show&&this.showBox()},t.prototype.createContent=function(){return this.box.html(this.getContentHtml()),this._img=this.box.find(".dialog-body img"),this},t.prototype.setProperty=function(){if(!this._img)return this;var t=this.options.target||Dialog.$window,o=t.width(),i=this._img.width(),e=t.height(),n=this._img.height();if(i<=o&&n<=e)return this.css({left:(o-i)/2+"px",top:(e-n)/2+"px",height:n,width:i}),this;var s=i/o,a=n/e;return a<=s?(n/=s,this.css({left:0,top:(e-n)/2+"px",height:n,width:o})):(i/=a,this.css({left:(o-i)/2+"px",top:0,height:e,width:i})),this._img.css({height:n,width:o}),this},t.prototype.bindEvent=function(){this.box.click(function(t){t.stopPropagation()}),this.onClick(".dialog-close",function(){this.close()}),this.onClick(".dialog-previous",function(){this.previous()}),this.onClick(".dialog-next",function(){this.next()});var t=this;return $(window).resize(function(){t.box&&t.resize()}),this.box.find(".dialog-body img").bind("load",function(){t.box&&t.resize()}),this},t.prototype.resize=function(){this.setProperty(),this.trigger("resize")},t.prototype.previous=function(){this.src=this.trigger("previous",--this._index)},t.prototype.next=function(){this.src=this.trigger("next",++this._index)},t.prototype.getContentHtml=function(){return this.options.content||(this.options.content=this.trigger("next",++this._index)),'<i class="fa fa-chevron-left dialog-previous"></i><div class="dialog-body"><img src="'+this.options.content+'"></div><i class="fa fa-chevron-right dialog-next"></i><i class="fa fa-close dialog-close"></i>'},t}(DialogContent),DefaultDialogImageOption=function(){this.onnext=function(t){return $(document.body).find("img").eq(t).attr("src")},this.onprevious=function(t){return $(document.body).find("img").eq(t).attr("src")}};Dialog.addMethod(DialogType.image,DialogImage);