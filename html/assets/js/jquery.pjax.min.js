!function(d){function t(t,e,n){return n=l(e,n),this.on("click.pjax",t,function(t){var e;"_blank"!==d(this).attr("target")&&((e=n).container||((e=d.extend({},n)).container=d(this).attr("data-pjax")),a(t,e))})}function a(t,e,n){n=l(e,n);var a=t.currentTarget,e=d(a);if("A"!==a.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol===a.protocol&&location.hostname===a.hostname&&(-1<a.href.indexOf("#")&&u(a)==u(location)||t.isDefaultPrevented()||(a={url:a.href,container:e.attr("data-pjax"),target:a},a=d.extend({},a,n),n=d.Event("pjax:click"),e.trigger(n,[a]),n.isDefaultPrevented()||(f(a),t.preventDefault(),e.trigger("pjax:clicked",[a]))))}function e(t,e,n){n=l(e,n);var a=t.currentTarget,r=d(a);if("FORM"!==a.tagName.toUpperCase())throw"$.pjax.submit requires a form element";e={type:(r.attr("method")||"GET").toUpperCase(),url:r.attr("action"),container:r.attr("data-pjax"),target:a};if("GET"!==e.type&&void 0!==window.FormData)e.data=new FormData(a),e.processData=!1,e.contentType=!1;else{if(r.find(":file").length)return;e.data=r.serializeArray()}f(d.extend({},e,n)),t.preventDefault()}function f(s){s=d.extend(!0,{},d.ajaxSettings,f.defaults,s),d.isFunction(s.url)&&(s.url=s.url());var u=y(s.url).hash,t=d.type(s.container);if("string"!==t)throw"expected string value for 'container' option; got "+t;var n,l=s.context=d(s.container);if(!l.length)throw"the container selector '"+s.container+"' did not match anything";function p(t,e,n){(n=n||{}).relatedTarget=s.target;n=d.Event(t,n);return l.trigger(n,e),!n.isDefaultPrevented()}s.data||(s.data={}),d.isArray(s.data)?s.data.push({name:"_pjax",value:s.container}):s.data._pjax=s.container,s.beforeSend=function(t,e){if("GET"!==e.type&&(e.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",s.container),!p("pjax:beforeSend",[t,e]))return!1;0<e.timeout&&(n=setTimeout(function(){p("pjax:timeout",[t,s])&&t.abort("timeout")},e.timeout),e.timeout=0);e=y(e.url);u&&(e.hash=u),s.requestUrl=v(e)},s.complete=function(t,e){n&&clearTimeout(n),p("pjax:complete",[t,e,s]),p("pjax:end",[t,s])},s.error=function(t,e,n){var a=w("",t,s),n=p("pjax:error",[t,e,n,s]);"GET"==s.type&&"abort"!==e&&n&&h(a.url)},s.success=function(t,e,n){var a=f.state,r="function"==typeof d.pjax.defaults.version?d.pjax.defaults.version():d.pjax.defaults.version,o=n.getResponseHeader("X-PJAX-Version"),i=w(t,n,s),c=y(i.url);if(u&&(c.hash=u,i.url=c.href),r&&o&&r!==o)h(i.url);else if(i.contents){if(f.state={id:s.id||x(),url:i.url,title:i.title,container:s.container,fragment:s.fragment,timeout:s.timeout},(s.push||s.replace)&&window.history.replaceState(f.state,i.title,i.url),d.contains(l,document.activeElement))try{document.activeElement.blur()}catch(t){}i.title&&(document.title=i.title),p("pjax:beforeReplace",[i.contents,s],{state:f.state,previousState:a}),l.html(i.contents);o=l.find("input[autofocus], textarea[autofocus]").last()[0];o&&document.activeElement!==o&&o.focus(),function(t){if(!t)return;var a=d("script[src]");t.each(function(){var t,e,n=this.src;a.filter(function(){return this.src===n}).length||(t=document.createElement("script"),(e=d(this).attr("type"))&&(t.type=e),t.src=d(this).attr("src"),document.head.appendChild(t))})}(i.scripts);a=s.scrollTo;u&&(o=decodeURIComponent(u.slice(1)),(o=document.getElementById(o)||document.getElementsByName(o)[0])&&(a=d(o).offset().top)),"number"==typeof a&&d(window).scrollTop(a),p("pjax:success",[t,e,n,s])}else h(i.url)},f.state||(f.state={id:x(),url:window.location.href,title:document.title,container:s.container,fragment:s.fragment,timeout:s.timeout},window.history.replaceState(f.state,document.title)),m(f.xhr),f.options=s;var e,a=f.xhr=d.ajax(s);return 0<a.readyState&&(s.push&&!s.replace&&(e=f.state.id,t=[s.container,g(l)],b[e]=t,E.push(e),S(T,0),S(E,f.defaults.maxCacheLength),window.history.pushState(null,"",s.requestUrl)),p("pjax:start",[a,s]),p("pjax:send",[a,s])),f.xhr}function n(t,e){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return f(d.extend(n,l(t,e)))}function h(t){window.history.replaceState(null,"",f.state.url),window.location.replace(t)}var i=!0,c=window.location.href,r=window.history.state;function o(t){i||m(f.xhr);var e=f.state,n=t.state;if(n&&n.container){if(i&&c==n.url)return;if(e){if(e.id===n.id)return;a=e.id<n.id?"forward":"back"}var a,r=b[n.id]||[],o=r[0]||n.container,t=d(o),r=r[1];t.length?(e&&function(t,e,n){var a;b[e]=n,t="forward"===t?(a=E,T):(a=T,E);a.push(e),(e=t.pop())&&delete b[e];S(a,f.defaults.maxCacheLength)}(a,e.id,[o,g(t)]),a=d.Event("pjax:popstate",{state:n,direction:a}),t.trigger(a),o={id:n.id,url:n.url,container:o,push:!1,fragment:n.fragment,timeout:n.timeout,scrollTo:!1},r?(t.trigger("pjax:start",[null,o]),(f.state=n).title&&(document.title=n.title),e=d.Event("pjax:beforeReplace",{state:n,previousState:e}),t.trigger(e,[r,o]),t.html(r),t.trigger("pjax:end",[null,o])):f(o),t[0].offsetHeight):h(location.href)}i=!1}function s(t){var e=d.isFunction(t.url)?t.url():t.url,n=t.type?t.type.toUpperCase():"GET",a=d("<form>",{method:"GET"===n?"GET":"POST",action:e,style:"display:none"});"GET"!==n&&"POST"!==n&&a.append(d("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var r,o=t.data;if("string"==typeof o)d.each(o.split("&"),function(t,e){e=e.split("=");a.append(d("<input>",{type:"hidden",name:e[0],value:e[1]}))});else if(d.isArray(o))d.each(o,function(t,e){a.append(d("<input>",{type:"hidden",name:e.name,value:e.value}))});else if("object"==typeof o)for(r in o)a.append(d("<input>",{type:"hidden",name:r,value:o[r]}));d(document.body).append(a),a.submit()}function m(t){t&&t.readyState<4&&(t.onreadystatechange=d.noop,t.abort())}function x(){return(new Date).getTime()}function g(t){t=t.clone();return t.find("script").each(function(){this.src||d._data(this,"globalEval",!1)}),t.contents()}function v(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),t.href.replace(/\?($|#)/,"$1")}function y(t){var e=document.createElement("a");return e.href=t,e}function u(t){return t.href.replace(/#.*/,"")}function l(t,e){return t&&e?((e=d.extend({},e)).container=t,e):d.isPlainObject(t)?t:{container:t}}function p(t,e){return t.filter(e).add(t.find(e))}function j(t){return d.parseHTML(t,document,!0)}function w(t,e,n){var a,r={},o=/<html/i.test(t),e=e.getResponseHeader("X-PJAX-URL");return r.url=e?v(y(e)):n.requestUrl,t=o?(a=d(j(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0])),null!=(e=t.match(/<head[^>]*>([\s\S.]*)<\/head>/i))?d(j(e[0])):a):a=d(j(t)),0===a.length||(r.title=p(t,"title").last().text(),n.fragment?(t=a,"body"!==n.fragment&&(t=p(t,n.fragment).first()),t.length&&(r.contents="body"===n.fragment?t:t.contents(),r.title||(r.title=t.attr("title")||t.data("title")))):o||(r.contents=a),r.contents&&(r.contents=r.contents.not(function(){return d(this).is("title")}),r.contents.find("title").remove(),r.scripts=p(r.contents,"script[src]").remove(),r.contents=r.contents.not(r.scripts)),r.title&&(r.title=d.trim(r.title))),r}r&&r.container&&(f.state=r),"state"in window.history&&(i=!1);var b={},T=[],E=[];function S(t,e){for(;t.length>e;)delete b[t.shift()]}function P(){return d("meta").filter(function(){var t=d(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function C(){d.fn.pjax=t,d.pjax=f,d.pjax.enable=d.noop,d.pjax.disable=A,d.pjax.click=a,d.pjax.submit=e,d.pjax.reload=n,d.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:P},d(window).on("popstate.pjax",o)}function A(){d.fn.pjax=function(){return this},d.pjax=s,d.pjax.enable=C,d.pjax.disable=d.noop,d.pjax.click=d.noop,d.pjax.submit=d.noop,d.pjax.reload=function(){window.location.reload()},d(window).off("popstate.pjax",o)}d.event.props&&d.inArray("state",d.event.props)<0?d.event.props.push("state"):"state"in d.Event.prototype||d.event.addProp("state"),d.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),(d.support.pjax?C:A)()}(jQuery);