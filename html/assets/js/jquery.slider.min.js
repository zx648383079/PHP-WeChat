var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])};return function(t,i){function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),Eve=function(){function t(){}return t.prototype.on=function(t,i){return this.options["on"+t]=i,this},t.prototype.hasEvent=function(t){return this.options.hasOwnProperty("on"+t)},t.prototype.trigger=function(t){for(var i,e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o="on"+t;if(this.hasEvent(t))return(i=this.options[o]).call.apply(i,[this].concat(e))},t}(),Point=function(){function t(t,i,e,n){var o;this.index=t,this.width=e,this.height=n,this.elements=[],"number"!=typeof i?(this.elements.push(i),o=this.getElementWidthAndHeight(),this.width=o[0],this.height=o[1],this.x=-this.width):this.x=i}return t.prototype.getLeft=function(t){return this.x-(t-3*this.width)/2},t.prototype.getElementWidthAndHeight=function(){return[this.elements[0].width(),this.elements[0].height()]},t.prototype.applyWidthAndHeight=function(){var e=this,t=this.getElementWidthAndHeight(),i=t[0],n=t[1];n==this.height&&this.width!=i&&(this.height=this.width*n/i),$.each(this.elements,function(t,i){i.width(e.width),i.height(e.height)})},t}(),SliderItem=function(h){function t(t,i){var e=h.call(this)||this;e.element=t,e._data=[],e._length=0,e._index=0;var n=e.element.attr("data-slider");if("1"==n)return e;e._extendOption(i,n);var o=e.element.find(e.options.item);return o.length<1?e:(e.options.width=e._getOption("width"),e.options.height=e._getOption("height"),e.options.animationmode=e._getOption("animationmode"),e.options.haspoint=e._getOption("haspoint"),e.element.addClass(e.options.animationmode+"-slider"),e._length=o.length,e._box=o.parent(),e.element.attr("data-slider",1),e._length<2?e._initOnly(o):e._init(o),e)}return __extends(t,h),t.prototype._timeCallback=function(){this._getOption("auto")&&this.next()},t.prototype._extendOption=function(t,i){try{i=JSON.parse(i)}catch(t){}this.options=$.extend({},t,i)},t.prototype._initOnly=function(t){var i=this;this._resetOnly(t),$(window).resize(function(){i._resetOnly(t)})},t.prototype._resetOnly=function(t){var i=0<this.options.width?this._getWidth(this.options.width):t.width(),e=0<this.options.height?this._getWidth(this.options.height):t.height();t.css({height:e,width:i}),this.element.css({height:e,width:i})},t.prototype._needMove=function(){return"fade"!=this.options.animationmode},t.prototype._copyItem=function(t){for(var i=0;i<2;i++)for(var e=0,n=t.length;e<n;e++){var o=$(t[e].cloneNode(!0));this._data[e].elements.push(o),this._box.append(o)}},t.prototype._init=function(t){var n=this;t.each(function(t,i){var e=new Point(t,$(i));n._data.push(e)}),this._needMove()&&this._copyItem(t),this.resize(),this.options.haspoint&&this._addListPoint(),this._bindEvent(),this._setTime()},t.prototype._bindEvent=function(){var t=this;this.element.find(this.options.previous).click(function(){t.previous()}),this.element.find(this.options.next).click(function(){t.next()}),$(window).resize(function(){t.resize()}),$.fn.swipe&&this.element.swipe({swipeLeft:function(){t.next()},swipeRight:function(){t.previous()}})},t.prototype._getOption=function(t){var i=this.element.data(t);return"false"!=i&&("true"==i||("boolean"==typeof i?i:i||this.options[t]))},t.prototype._getWidth=function(t){return 1<t?t:this.element.width()*t},t.prototype._setTime=function(){this._time=(this._getOption("spaceTime")+this._getOption("animationTime"))/16},t.prototype._addListPoint=function(){for(var t="",i=1;i<=this._length;i++)t+="<li><span>"+i+"</span></i>";this.element.append('<ul class="slider-point">'+t+"</ul>");var e=this;this.element.on(this._getOption("pointEvent"),".slider-point li",function(){e.index=$(this).index()})},t.prototype.resize=function(){var e=this,t=this.element.width(),n=0;$.each(this._data,function(t,i){0<e.options.width&&(i.width=e._getWidth(e.options.width)),0<e.options.height&&(i.height=e._getWidth(e.options.height)),i.applyWidthAndHeight(),n+=i.width,i.x=-n}),this._needMove()&&this._applySize(n,t),this.index=this._index},t.prototype._applySize=function(e,t){$.each(this._data,function(t,i){i.x-=e}),this._box.css({left:this._data[this._index].getLeft(t)+"px"}),this._box.width(3*e)},Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(t){this.goto(t)},enumerable:!0,configurable:!0}),t.prototype.next=function(){this.index++},t.prototype.previous=function(){this.index--},t.prototype._getPoint=function(t){if(t<0){var i=this._data[this._data.length-1];return[new Point(t,this._data[0].x+i.width,i.width,i.height),i]}if(t>=this._data.length){var e=this._data[0];return[new Point(t,this._data[this._data.length-1].x-e.width,e.width,e.height),e]}return[this._data[t],this._data[t]]},t.prototype.goto=function(t){this._setTime(),this._changePoint(t)},t.prototype._changePoint=function(e){if(this._needMove())return this._movePoint(e);e<0?e=this._data.length-1:e>=this._data.length&&(e=0);var n=this,o=this._getOption("animationTime");this._data.forEach(function(t,i){if(i==e)return t.elements[0].animate({opacity:1},o,"swing",function(){n._showPoint(e)}),void n.trigger("change",t);t.elements[0].animate({opacity:0},o,"swing")})},t.prototype._showPoint=function(t){this._index=t,this.options.haspoint&&this.element.find(".slider-point li").eq(t).addClass("active").siblings().removeClass("active")},t.prototype._movePoint=function(t){var i=this._getPoint(t),e=this.element.width();this.element.height(i[0].height);var n=this;this._goAndCallback(i[0].getLeft(e),function(){i[0].index!=i[1].index&&n._box.css({left:i[1].getLeft(e)+"px"}),n._showPoint(i[1].index)}),this.trigger.apply(this,["change"].concat(i))},t.prototype._goAndCallback=function(t,i){this._box.animate({left:t+"px"},this._getOption("animationtime"),this.options.animationmode,i)},t.prototype.run=function(){this._length<1||(this._time--,this._time<=0&&this._timeCallback())},t}(Eve),Slider=function(){function t(t,i){var e=this;this.element=t,this._data=[],this.options=$.extend({},new SliderDefaultOptions,i),0!=this.element.length&&(this.element.each(function(t,i){e.addItem($(i))}),this._runTimer())}return t.prototype.addItem=function(t){t instanceof SliderItem?this._data.push(t):this._data.push(new SliderItem(t,this.options))},t.prototype.map=function(i,t){var e=this;if(void 0===t&&(t=this._data.length-1),"number"==typeof t)for(t>=this._data.length&&(t=this._data.length-1);0<=t;t--){var n=this._data[t],o=i(n,t);if(1==o&&this._data.splice(t,1),0==o)return}else t.forEach(function(t){t<0||t>=e._data.length||i(e._data[t],t)})},t.prototype._runTimer=function(){var t=this;this._timer=requestAnimationFrame(function(){t.map(function(t){t.run()}),t._runTimer()})},t.prototype._cancelTimer=function(){this._timer&&cancelAnimationFrame(this._timer)},t}(),SliderDefaultOptions=function(){this.item="li",this.spacetime=3e3,this.animationtime=1e3,this.animationmode="swing",this.previous=".slider-previous",this.next=".slider-next",this.haspoint=!0,this.pointevent="click",this.auto=!0};jQuery.fn.slider=function(t){return new Slider(this,t)};