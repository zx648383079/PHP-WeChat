var __extends=this&&this.__extends||function(){var n=function(t,i){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,i){t.__proto__=i}:function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}))(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),__spreadArray=this&&this.__spreadArray||function(t,i,e){if(e||2===arguments.length)for(var n,o=0,s=i.length;o<s;o++)!n&&o in i||((n=n||Array.prototype.slice.call(i,0,o))[o]=i[o]);return t.concat(n||Array.prototype.slice.call(i))},Eve=function(){function t(){}return t.prototype.on=function(t,i){return this.options["on"+t]=i,this},t.prototype.hasEvent=function(t){return this.options.hasOwnProperty("on"+t)},t.prototype.trigger=function(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];var n="on"+t;if(this.hasEvent(t))return(n=this.options[n]).call.apply(n,__spreadArray([this],i,!1))},t}(),Point=function(){function t(t,i,e,n){this.index=t,this.width=e,this.height=n,this.elements=[],"number"==typeof i?this.x=i:(this.elements.push(i),t=this.getElementWidthAndHeight(),this.width=t[0],this.height=t[1],this.x=-this.width)}return t.prototype.getLeft=function(t,i){return"left"===i?this.x:"right"===i?this.x-this.width+t:this.x-(t-3*this.width)/2},t.prototype.getElementWidthAndHeight=function(){return[this.elements[0].width(),this.elements[0].height()]},t.prototype.applyWidthAndHeight=function(t){void 0===t&&(t=!0);var e=this,i=this.getElementWidthAndHeight(),n=i[0],i=i[1];t&&i===this.height&&this.width!==n&&(this.height=this.width*i/n),$.each(this.elements,function(t,i){i.width(e.width),i.height(e.height)})},t}(),SliderItem=function(n){function t(t,i){var e=n.call(this)||this,t=(e.element=t,e._data=[],e._length=0,e._index=0,e._lastWidth=0,e.element.attr("data-slider"));return"1"==t||(e._extendOption(i,t),(i=e.element.find(e.options.item)).length<1)||(e.options.width=e._getOption("width"),e.options.height=e._getOption("height"),e.options.animationmode=e._getOption("animationmode"),e.options.haspoint=e._getOption("haspoint"),e.options.align=e._getOption("align"),e.element.addClass(e.options.animationmode+"-slider"),e._length=i.length,e._box=i.parent(),e.element.attr("data-slider",1),e._length<2?e._initOnly(i):e._init(i),e.bindResize()),e}return __extends(t,n),t.prototype.getItemWidth=function(){var e,n,o,t=this.options.width;return"object"!=typeof t?0<t?this._getWidth(t):0:(e=$(window).width(),n=0,o=1,$.each(t,function(t,i){e<t||n<=t&&(o=i,n=t)}),0<o?this._lastWidth/o:0)},t.prototype.getItemHeight=function(t){var i=this.options.height;return"object"!=typeof this.options.width?0<i?this._getWidth(i):0:i<10?i*t:i},t.prototype._timeCallback=function(){this._getOption("auto")&&this.next()},t.prototype._extendOption=function(t,i){try{i=JSON.parse(i)}catch(t){}this.options=$.extend({},t,i)},t.prototype.bindResize=function(){var i=this,e=this._box.parent();this._lastWidth=e.width(),$(window).on("resize",function(){var t=e.width();t!==i._lastWidth&&(i._lastWidth=t,i.element.trigger("slider:resize",i._lastWidth))}),this.element.trigger("slider:resize",this._lastWidth)},t.prototype._initOnly=function(t){var i=this;this.element.on("slider:resize",function(){i._resetOnly(t)})},t.prototype._resetOnly=function(t){var i=this.getItemWidth(),e=(i<=0&&(i=t.width()),this.getItemHeight(i));e<=0&&(e=t.height()),t.css({height:e,width:i}),this.element.css({height:e,width:i})},t.prototype._needMove=function(){return"fade"!=this.options.animationmode},t.prototype._copyItem=function(t){for(var i=0;i<2;i++)for(var e=0,n=t.length;e<n;e++){var o=$(t[e].cloneNode(!0));this._data[e].elements.push(o),this._box.append(o)}},t.prototype._init=function(t){var e=this;t.each(function(t,i){t=new Point(t,$(i));e._data.push(t)}),this._needMove()&&this._copyItem(t),this.options.haspoint&&this._addListPoint(),this._bindEvent(),this._setTime()},t.prototype._bindEvent=function(){var t=this,i=this;this.element.on("click",this.options.previous,function(){i.previous()}),this.element.on("click",this.options.next,function(){i.next()}),this.element.on(this._getOption("pointevent"),".slider-point li",function(){i.index=$(this).index()}),this.element.on("slider:resize",function(){t.resize()}),$.fn.swipe&&this.element.swipe({swipeLeft:function(){i.next()},swipeRight:function(){i.previous()}})},t.prototype._getOption=function(t){var i=this.element.data(t);return"false"!=i&&("true"==i||("boolean"==typeof i?i:i||this.options[t]))},t.prototype._getWidth=function(t){return 1<t?t:this.element.width()*t},t.prototype._setTime=function(){this._time=(this._getOption("spacetime")+this._getOption("animationtime"))/16},t.prototype._addListPoint=function(){for(var t="",i=1;i<=this._length;i++)t+="<li><span>"+i+"</span></i>";this.element.append('<ul class="slider-point">'+t+"</ul>")},t.prototype.resize=function(){this._setTime();var e=this,t=this.element.width(),n=0,o=this.getItemWidth(),s=this.getItemHeight(o);$.each(this._data,function(t,i){0<o&&(i.width=o),0<s&&(i.height=s),i.applyWidthAndHeight(!(0<e.options.height)),n+=i.width,i.x=-n}),this._needMove()&&this._applySize(n,t),this.index=this._index},t.prototype._applySize=function(e,t){$.each(this._data,function(t,i){i.x-=e}),this._box.css({left:this._data[this._index].getLeft(t,this.options.align)+"px"}),this._box.width(3*e)},Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(t){this.goto(t)},enumerable:!1,configurable:!0}),t.prototype.next=function(){this.index++},t.prototype.previous=function(){this.index--},t.prototype._getPoint=function(t){var i;return t<0?(i=this._data[this._data.length-1],[new Point(t,this._data[0].x+i.width,i.width,i.height),i]):t>=this._data.length?(i=this._data[0],[new Point(t,this._data[this._data.length-1].x-i.width,i.width,i.height),i]):[this._data[t],this._data[t]]},t.prototype.goto=function(t){this._setTime(),this._changePoint(t)},t.prototype._changePoint=function(e){if(this._needMove())return this._movePoint(e);e<0?e=this._data.length-1:e>=this._data.length&&(e=0);var n=this,o=this._getOption("animationtime");this._data.forEach(function(t,i){i==e?(t.elements[0].animate({opacity:1},o,"swing",function(){n._showPoint(e)}),n.trigger("change",t)):t.elements[0].animate({opacity:0},o,"swing")})},t.prototype._showPoint=function(t){this._index=t,this.element.find(".slider-point li").eq(t).addClass("active").siblings().removeClass("active")},t.prototype._movePoint=function(t){var i=this._getPoint(t),e=this.element.width(),n=(this.element.height(i[0].height),this);this._goAndCallback(i[0].getLeft(e,this.options.align),function(){i[0].index!=i[1].index&&n._box.css({left:i[1].getLeft(e,n.options.align)+"px"}),n._showPoint(i[1].index)}),this.trigger.apply(this,__spreadArray(["change"],i,!1))},t.prototype._goAndCallback=function(t,i){this._box.stop(!0,!0),this._box.animate({left:t+"px"},this._getOption("animationtime"),this.options.animationmode,i)},t.prototype.run=function(){this._length<1||(this._time--,this._time<=0&&this._timeCallback())},t}(Eve),Slider=function(){function t(t,i){var e=this;this.element=t,this._data=[],this.options=$.extend({},new SliderDefaultOptions,i),0!=this.element.length&&(this.element.each(function(t,i){e.addItem($(i))}),this._runTimer())}return t.prototype.addItem=function(t){t instanceof SliderItem?this._data.push(t):this._data.push(new SliderItem(t,this.options))},t.prototype.map=function(i,t){var e=this;if("number"!=typeof(t=void 0===t?this._data.length-1:t))t.forEach(function(t){t<0||t>=e._data.length||i(e._data[t],t)});else for(t>=this._data.length&&(t=this._data.length-1);0<=t;t--){var n=this._data[t],n=i(n,t);if(1==n&&this._data.splice(t,1),0==n)return}},t.prototype._runTimer=function(){var t=this;this._timer=requestAnimationFrame(function(){t.map(function(t){t.run()}),t._runTimer()})},t.prototype._cancelTimer=function(){this._timer&&cancelAnimationFrame(this._timer)},t}(),SliderDefaultOptions=function(){this.item=".slider-box li",this.spacetime=3e3,this.animationtime=1e3,this.animationmode="swing",this.previous=".slider-previous",this.next=".slider-next",this.haspoint=!0,this.pointevent="click",this.auto=!0,this.align="center"};jQuery.fn.slider=function(t){return new Slider(this,t)};