"use strict";window.jscolor||(window.jscolor=function(){var n,r,e,m={register:function(){m.attachDOMReadyEvent(m.init),m.attachEvent(document,"mousedown",m.onDocumentMouseDown),m.attachEvent(document,"touchstart",m.onDocumentTouchStart),m.attachEvent(window,"resize",m.onWindowResize)},init:function(){m.jscolor.lookupClass&&m.jscolor.installByClassName(m.jscolor.lookupClass)},tryInstallOnElements:function(e,t){for(var n,o=new RegExp("(^|\\s)("+t+")(\\s*(\\{[^}]*\\})|\\s|$)","i"),r=0;r<e.length;r+=1)if((void 0===e[r].type||"color"!=e[r].type.toLowerCase()||!m.isColorAttrSupported)&&!e[r].jscolor&&e[r].className&&(n=e[r].className.match(o))){var i=e[r],s=null,l=m.getDataAttr(i,"jscolor"),l=(null!==l?s=l:n[4]&&(s=n[4]),{});if(s)try{l=new Function("return ("+s+")")()}catch(e){m.warn("Error parsing jscolor options: "+e+":\n"+s)}i.jscolor=new m.jscolor(i,l)}},isColorAttrSupported:!(!(e=document.createElement("input")).setAttribute||(e.setAttribute("type","color"),"color"!=e.type.toLowerCase())),isCanvasSupported:!(!(e=document.createElement("canvas")).getContext||!e.getContext("2d")),fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},isElementType:function(e,t){return e.nodeName.toLowerCase()===t.toLowerCase()},getDataAttr:function(e,t){e=e.getAttribute("data-"+t);return null!==e?e:null},attachEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},detachEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},_attachedGroupEvents:{},attachGroupEvent:function(e,t,n,o){m._attachedGroupEvents.hasOwnProperty(e)||(m._attachedGroupEvents[e]=[]),m._attachedGroupEvents[e].push([t,n,o]),m.attachEvent(t,n,o)},detachGroupEvents:function(e){if(m._attachedGroupEvents.hasOwnProperty(e)){for(var t=0;t<m._attachedGroupEvents[e].length;t+=1){var n=m._attachedGroupEvents[e][t];m.detachEvent(n[0],n[1],n[2])}delete m._attachedGroupEvents[e]}},attachDOMReadyEvent:function(e){function t(){o||(o=!0,e())}var n,o=!1;"complete"===document.readyState?setTimeout(t,1):document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),t())}),window.attachEvent("onload",t),document.documentElement.doScroll)&&window==window.top&&(n=function(){if(document.body)try{document.documentElement.doScroll("left"),t()}catch(e){setTimeout(n,1)}})()},warn:function(e){window.console&&window.console.warn&&window.console.warn(e)},preventDefault:function(e){e.preventDefault&&e.preventDefault(),e.returnValue=!1},captureTarget:function(e){e.setCapture&&(m._capturedTarget=e,m._capturedTarget.setCapture())},releaseTarget:function(){m._capturedTarget&&(m._capturedTarget.releaseCapture(),m._capturedTarget=null)},fireEvent:function(e,t){var n;e&&(document.createEvent?((n=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(n)):document.createEventObject?(n=document.createEventObject(),e.fireEvent("on"+t,n)):e["on"+t]&&e["on"+t]())},classNameToList:function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s+/)},hasClass:function(e,t){return!!t&&-1!=(" "+e.className.replace(/\s+/g," ")+" ").indexOf(" "+t+" ")},setClass:function(e,t){for(var n=m.classNameToList(t),o=0;o<n.length;o+=1)m.hasClass(e,n[o])||(e.className+=(e.className?" ":"")+n[o])},unsetClass:function(e,t){for(var n=m.classNameToList(t),o=0;o<n.length;o+=1){var r=new RegExp("^\\s*"+n[o]+"\\s*|\\s*"+n[o]+"\\s*$|\\s+"+n[o]+"(\\s+)","g");e.className=e.className.replace(r,"$1")}},getStyle:function(e){return window.getComputedStyle?window.getComputedStyle(e):e.currentStyle},setStyle:(n=document.createElement("div"),function(e,t,n){var o;"opacity"===t.toLowerCase()?(o=Math.round(100*parseFloat(n)),e.style.opacity=n,e.style.filter="alpha(opacity="+o+")"):e.style[r[t]]=n}),setBorderRadius:function(e,t){m.setStyle(e,"borderRadius",t||"0")},setBoxShadow:function(e,t){m.setStyle(e,"boxShadow",t||"none")},getElementPos:function(e,t){var n=0,o=0,e=e.getBoundingClientRect(),n=e.left,o=e.top;return t||(n+=(e=m.getViewPos())[0],o+=e[1]),[n,o]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getAbsPointerPos:function(e){var t=0,n=0;return void 0!==(e=e||window.event).changedTouches&&e.changedTouches.length?(t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY):"number"==typeof e.clientX&&(t=e.clientX,n=e.clientY),{x:t,y:n}},getRelPointerPos:function(e){var t=((e=e||window.event).target||e.srcElement).getBoundingClientRect(),n=0,o=0;return void 0!==e.changedTouches&&e.changedTouches.length?(n=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY):"number"==typeof e.clientX&&(n=e.clientX,o=e.clientY),{x:n-t.left,y:o-t.top}},getViewPos:function(){var e=document.documentElement;return[(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),(window.pageYOffset||e.scrollTop)-(e.clientTop||0)]},getViewSize:function(){var e=document.documentElement;return[window.innerWidth||e.clientWidth,window.innerHeight||e.clientHeight]},redrawPosition:function(){if(m.picker&&m.picker.owner){var e,t,n,o,r=m.picker.owner,i=r.fixed?(e=m.getElementPos(r.targetElement,!0),[0,0]):(e=m.getElementPos(r.targetElement),m.getViewPos()),s=m.getElementSize(r.targetElement),l=m.getViewSize(),a=m.getPickerOuterDims(r);switch(r.position.toLowerCase()){case"left":n=0,o=-(t=1);break;case"right":n=0,o=t=1;break;case"top":t=0,o=-(n=1);break;default:t=0,o=n=1}var d=(s[n]+a[n])/2,l=(i=r.smartPosition?[-i[t]+e[t]+a[t]>l[t]&&-i[t]+e[t]+s[t]/2>l[t]/2&&0<=e[t]+s[t]-a[t]?e[t]+s[t]-a[t]:e[t],-i[n]+e[n]+s[n]+a[n]-d+d*o>l[n]?-i[n]+e[n]+s[n]/2>l[n]/2&&0<=e[n]+s[n]-d-d*o?e[n]+s[n]-d-d*o:e[n]+s[n]-d+d*o:0<=e[n]+s[n]-d+d*o?e[n]+s[n]-d+d*o:e[n]+s[n]-d-d*o]:[e[t],e[n]+s[n]-d+d*o])[t],d=i[n],c=r.fixed?"fixed":"absolute",i=(i[0]+a[0]>e[0]||i[0]<e[0]+s[0])&&i[1]+a[1]<e[1]+s[1];m._drawPosition(r,l,d,c,i)}},_drawPosition:function(e,t,n,o,r){r=r?0:e.shadowBlur;m.picker.wrap.style.position=o,m.picker.wrap.style.left=t+"px",m.picker.wrap.style.top=n+"px",m.setBoxShadow(m.picker.boxS,e.shadow?new m.BoxShadow(0,r,e.shadowBlur,0,e.shadowColor):null)},getPickerDims:function(e){var t=!!m.getSliderComponent(e);return[2*e.insetWidth+2*e.padding+e.width+(t?2*e.insetWidth+m.getPadToSliderPadding(e)+e.sliderSize:0),2*e.insetWidth+2*e.padding+e.height+(e.closable?2*e.insetWidth+e.padding+e.buttonHeight:0)]},getPickerOuterDims:function(e){var t=m.getPickerDims(e);return[t[0]+2*e.borderWidth,t[1]+2*e.borderWidth]},getPadToSliderPadding:function(e){return Math.max(e.padding,1.5*(2*e.pointerBorderWidth+e.pointerThickness))},getPadYComponent:function(e){return"v"===e.mode.charAt(1).toLowerCase()?"v":"s"},getSliderComponent:function(e){if(2<e.mode.length)switch(e.mode.charAt(2).toLowerCase()){case"s":return"s";case"v":return"v"}return null},onDocumentMouseDown:function(e){var t=(e=e||window.event).target||e.srcElement;t._jscLinkedInstance?t._jscLinkedInstance.showOnClick&&t._jscLinkedInstance.show():t._jscControlName?m.onControlPointerStart(e,t,t._jscControlName,"mouse"):m.picker&&m.picker.owner&&m.picker.owner.hide()},onDocumentTouchStart:function(e){var t=(e=e||window.event).target||e.srcElement;t._jscLinkedInstance?t._jscLinkedInstance.showOnClick&&t._jscLinkedInstance.show():t._jscControlName?m.onControlPointerStart(e,t,t._jscControlName,"touch"):m.picker&&m.picker.owner&&m.picker.owner.hide()},onWindowResize:function(e){m.redrawPosition()},onParentScroll:function(e){m.picker&&m.picker.owner&&m.picker.owner.hide()},_pointerMoveEvent:{mouse:"mousemove",touch:"touchmove"},_pointerEndEvent:{mouse:"mouseup",touch:"touchend"},_pointerOrigin:null,_capturedTarget:null,onControlPointerStart:function(n,o,r,i){function e(e,t){m.attachGroupEvent("drag",e,m._pointerMoveEvent[i],m.onDocumentPointerMove(n,o,r,i,t)),m.attachGroupEvent("drag",e,m._pointerEndEvent[i],m.onDocumentPointerEnd(n,o,r,i))}var t=o._jscInstance,s=(m.preventDefault(n),m.captureTarget(o),e(document,[0,0]),window.parent&&window.frameElement&&(s=[-(s=window.frameElement.getBoundingClientRect()).left,-s.top],e(window.parent.window.document,s)),m.getAbsPointerPos(n)),l=m.getRelPointerPos(n);switch(m._pointerOrigin={x:s.x-l.x,y:s.y-l.y},r){case"pad":switch(m.getSliderComponent(t)){case"s":0===t.hsv[1]&&t.fromHSV(null,100,null);break;case"v":0===t.hsv[2]&&t.fromHSV(null,null,100)}m.setPad(t,n,0,0);break;case"sld":m.setSld(t,n,0)}m.dispatchFineChange(t)},onDocumentPointerMove:function(e,n,o,t,r){return function(e){var t=n._jscInstance;switch(o){case"pad":e=e||window.event,m.setPad(t,e,r[0],r[1]),m.dispatchFineChange(t);break;case"sld":e=e||window.event,m.setSld(t,e,r[1]),m.dispatchFineChange(t)}}},onDocumentPointerEnd:function(e,n,t,o){return function(e){var t=n._jscInstance;m.detachGroupEvents("drag"),m.releaseTarget(),m.dispatchChange(t)}},dispatchChange:function(e){e.valueElement&&m.isElementType(e.valueElement,"input")&&m.fireEvent(e.valueElement,"change")},dispatchFineChange:function(e){e.onFineChange&&("string"==typeof e.onFineChange?new Function(e.onFineChange):e.onFineChange).call(e)},setPad:function(e,t,n,o){var t=m.getAbsPointerPos(t),n=n+t.x-m._pointerOrigin.x-e.padding-e.insetWidth,o=o+t.y-m._pointerOrigin.y-e.padding-e.insetWidth,r=n*(360/(e.width-1)),i=100-o*(100/(e.height-1));switch(m.getPadYComponent(e)){case"s":e.fromHSV(r,i,null,m.leaveSld);break;case"v":e.fromHSV(r,null,i,m.leaveSld)}},setSld:function(e,t,n){var o=100-(n+m.getAbsPointerPos(t).y-m._pointerOrigin.y-e.padding-e.insetWidth)*(100/(e.height-1));switch(m.getSliderComponent(e)){case"s":e.fromHSV(null,o,null,m.leavePad);break;case"v":e.fromHSV(null,null,o,m.leavePad)}},_vmlNS:"jsc_vml_",_vmlCSS:"jsc_vml_css_",_vmlReady:!(r={borderRadius:o(["borderRadius","MozBorderRadius","webkitBorderRadius"]),boxShadow:o(["boxShadow","MozBoxShadow","webkitBoxShadow"])}),initVML:function(){if(!m._vmlReady){var e=document;if(e.namespaces[m._vmlNS]||e.namespaces.add(m._vmlNS,"urn:schemas-microsoft-com:vml"),!e.styleSheets[m._vmlCSS]){var t=["shape","shapetype","group","background","path","formulas","handles","fill","stroke","shadow","textbox","textpath","imagedata","line","polyline","curve","rect","roundrect","oval","arc","image"],n=e.createStyleSheet();n.owningElement.id=m._vmlCSS;for(var o=0;o<t.length;o+=1)n.addRule(m._vmlNS+"\\:"+t[o],"behavior:url(#default#VML);")}m._vmlReady=!0}},createPalette:function(){var r,i,o,s,l,a,d,e,t={elm:null,draw:null};return m.isCanvasSupported?(r=document.createElement("canvas"),i=r.getContext("2d"),e=function(e,t,n){r.width=e,r.height=t,i.clearRect(0,0,r.width,r.height);var e=i.createLinearGradient(0,0,r.width,0),o=(e.addColorStop(0,"#F00"),e.addColorStop(1/6,"#FF0"),e.addColorStop(2/6,"#0F0"),e.addColorStop(.5,"#0FF"),e.addColorStop(4/6,"#00F"),e.addColorStop(5/6,"#F0F"),e.addColorStop(1,"#F00"),i.fillStyle=e,i.fillRect(0,0,r.width,r.height),i.createLinearGradient(0,0,0,r.height));switch(n.toLowerCase()){case"s":o.addColorStop(0,"rgba(255,255,255,0)"),o.addColorStop(1,"rgba(255,255,255,1)");break;case"v":o.addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,1)")}i.fillStyle=o,i.fillRect(0,0,r.width,r.height)},t.elm=r):(m.initVML(),(o=document.createElement("div")).style.position="relative",o.style.overflow="hidden",(s=document.createElement(m._vmlNS+":fill")).type="gradient",s.method="linear",s.angle="90",s.colors="16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0",(l=document.createElement(m._vmlNS+":rect")).style.position="absolute",l.style.left="-1px",l.style.top="-1px",l.stroked=!1,l.appendChild(s),o.appendChild(l),(a=document.createElement(m._vmlNS+":fill")).type="gradient",a.method="linear",a.angle="180",a.opacity="0",(d=document.createElement(m._vmlNS+":rect")).style.position="absolute",d.style.left="-1px",d.style.top="-1px",d.stroked=!1,d.appendChild(a),o.appendChild(d),e=function(e,t,n){switch(o.style.width=e+"px",o.style.height=t+"px",l.style.width=d.style.width=e+1+"px",l.style.height=d.style.height=t+1+"px",s.color="#F00",s.color2="#F00",n.toLowerCase()){case"s":a.color=a.color2="#FFF";break;case"v":a.color=a.color2="#000"}},t.elm=o),t.draw=e,t},createSliderGradient:function(){var r,i,s,l,a,e,t={elm:null,draw:null};return m.isCanvasSupported?(r=document.createElement("canvas"),i=r.getContext("2d"),e=function(e,t,n,o){r.width=e,r.height=t,i.clearRect(0,0,r.width,r.height);e=i.createLinearGradient(0,0,0,r.height);e.addColorStop(0,n),e.addColorStop(1,o),i.fillStyle=e,i.fillRect(0,0,r.width,r.height)},t.elm=r):(m.initVML(),(s=document.createElement("div")).style.position="relative",s.style.overflow="hidden",(l=document.createElement(m._vmlNS+":fill")).type="gradient",l.method="linear",l.angle="180",(a=document.createElement(m._vmlNS+":rect")).style.position="absolute",a.style.left="-1px",a.style.top="-1px",a.stroked=!1,a.appendChild(l),s.appendChild(a),e=function(e,t,n,o){s.style.width=e+"px",s.style.height=t+"px",a.style.width=e+1+"px",a.style.height=t+1+"px",l.color=n,l.color2=o},t.elm=s),t.draw=e,t},leaveValue:1,leaveStyle:2,leavePad:4,leaveSld:8,BoxShadow:(t.prototype.toString=function(){var e=[Math.round(this.hShadow)+"px",Math.round(this.vShadow)+"px",Math.round(this.blur)+"px",Math.round(this.spread)+"px",this.color];return this.inset&&e.push("inset"),e.join(" ")},t),jscolor:function(e,t){for(var n in this.value=null,this.valueElement=e,this.styleElement=e,this.required=!0,this.refine=!0,this.hash=!1,this.uppercase=!0,this.onFineChange=null,this.activeClass="jscolor-active",this.overwriteImportant=!1,this.minS=0,this.maxS=100,this.minV=0,this.maxV=100,this.hsv=[0,0,100],this.rgb=[255,255,255],this.width=181,this.height=101,this.showOnClick=!0,this.mode="HSV",this.position="bottom",this.smartPosition=!0,this.sliderSize=16,this.crossSize=8,this.closable=!1,this.closeText="Close",this.buttonColor="#000000",this.buttonHeight=18,this.padding=12,this.backgroundColor="#FFFFFF",this.borderWidth=1,this.borderColor="#BBBBBB",this.borderRadius=8,this.insetWidth=1,this.insetColor="#BBBBBB",this.shadow=!0,this.shadowBlur=15,this.shadowColor="rgba(0,0,0,0.2)",this.pointerColor="#4C4C4C",this.pointerBorderColor="#FFFFFF",this.pointerBorderWidth=1,this.pointerThickness=2,this.zIndex=1e3,this.container=null,t)t.hasOwnProperty(n)&&(this[n]=t[n]);function l(e,t,n){var o=n/100*255;if(null===e)return[o,o,o];e/=60,t/=100;var n=Math.floor(e),r=o*(1-t),i=o*(1-t*(n%2?e-n:1-(e-n)));switch(n){case 6:case 0:return[o,i,r];case 1:return[i,o,r];case 2:return[r,o,i];case 3:return[r,i,o];case 4:return[i,r,o];case 5:return[o,r,i]}}function o(){d._processParentElementsInDOM(),m.picker||(m.picker={owner:null,wrap:document.createElement("div"),box:document.createElement("div"),boxS:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),padPal:m.createPalette(),cross:document.createElement("div"),crossBY:document.createElement("div"),crossBX:document.createElement("div"),crossLY:document.createElement("div"),crossLX:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),sldGrad:m.createSliderGradient(),sldPtrS:document.createElement("div"),sldPtrIB:document.createElement("div"),sldPtrMB:document.createElement("div"),sldPtrOB:document.createElement("div"),btn:document.createElement("div"),btnT:document.createElement("span")},m.picker.pad.appendChild(m.picker.padPal.elm),m.picker.padB.appendChild(m.picker.pad),m.picker.cross.appendChild(m.picker.crossBY),m.picker.cross.appendChild(m.picker.crossBX),m.picker.cross.appendChild(m.picker.crossLY),m.picker.cross.appendChild(m.picker.crossLX),m.picker.padB.appendChild(m.picker.cross),m.picker.box.appendChild(m.picker.padB),m.picker.box.appendChild(m.picker.padM),m.picker.sld.appendChild(m.picker.sldGrad.elm),m.picker.sldB.appendChild(m.picker.sld),m.picker.sldB.appendChild(m.picker.sldPtrOB),m.picker.sldPtrOB.appendChild(m.picker.sldPtrMB),m.picker.sldPtrMB.appendChild(m.picker.sldPtrIB),m.picker.sldPtrIB.appendChild(m.picker.sldPtrS),m.picker.box.appendChild(m.picker.sldB),m.picker.box.appendChild(m.picker.sldM),m.picker.btn.appendChild(m.picker.btnT),m.picker.box.appendChild(m.picker.btn),m.picker.boxB.appendChild(m.picker.box),m.picker.wrap.appendChild(m.picker.boxS),m.picker.wrap.appendChild(m.picker.boxB));var t=m.picker,e=!!m.getSliderComponent(d),n=m.getPickerDims(d),o=2*d.pointerBorderWidth+d.pointerThickness+2*d.crossSize,r=m.getPadToSliderPadding(d),i=Math.min(d.borderRadius,Math.round(d.padding*Math.PI));t.wrap.style.clear="both",t.wrap.style.width=n[0]+2*d.borderWidth+"px",t.wrap.style.height=n[1]+2*d.borderWidth+"px",t.wrap.style.zIndex=d.zIndex,t.box.style.width=n[0]+"px",t.box.style.height=n[1]+"px",t.boxS.style.position="absolute",t.boxS.style.left="0",t.boxS.style.top="0",t.boxS.style.width="100%",t.boxS.style.height="100%",m.setBorderRadius(t.boxS,i+"px"),t.boxB.style.position="relative",t.boxB.style.border=d.borderWidth+"px solid",t.boxB.style.borderColor=d.borderColor,t.boxB.style.background=d.backgroundColor,m.setBorderRadius(t.boxB,i+"px"),t.padM.style.background=t.sldM.style.background="#FFF",m.setStyle(t.padM,"opacity","0"),m.setStyle(t.sldM,"opacity","0"),t.pad.style.position="relative",t.pad.style.width=d.width+"px",t.pad.style.height=d.height+"px",t.padPal.draw(d.width,d.height,m.getPadYComponent(d)),t.padB.style.position="absolute",t.padB.style.left=d.padding+"px",t.padB.style.top=d.padding+"px",t.padB.style.border=d.insetWidth+"px solid",t.padB.style.borderColor=d.insetColor,t.padM._jscInstance=d,t.padM._jscControlName="pad",t.padM.style.position="absolute",t.padM.style.left="0",t.padM.style.top="0",t.padM.style.width=d.padding+2*d.insetWidth+d.width+r/2+"px",t.padM.style.height=n[1]+"px",t.padM.style.cursor="crosshair",t.cross.style.position="absolute",t.cross.style.left=t.cross.style.top="0",t.cross.style.width=t.cross.style.height=o+"px",t.crossBY.style.position=t.crossBX.style.position="absolute",t.crossBY.style.background=t.crossBX.style.background=d.pointerBorderColor,t.crossBY.style.width=t.crossBX.style.height=2*d.pointerBorderWidth+d.pointerThickness+"px",t.crossBY.style.height=t.crossBX.style.width=o+"px",t.crossBY.style.left=t.crossBX.style.top=Math.floor(o/2)-Math.floor(d.pointerThickness/2)-d.pointerBorderWidth+"px",t.crossBY.style.top=t.crossBX.style.left="0",t.crossLY.style.position=t.crossLX.style.position="absolute",t.crossLY.style.background=t.crossLX.style.background=d.pointerColor,t.crossLY.style.height=t.crossLX.style.width=o-2*d.pointerBorderWidth+"px",t.crossLY.style.width=t.crossLX.style.height=d.pointerThickness+"px",t.crossLY.style.left=t.crossLX.style.top=Math.floor(o/2)-Math.floor(d.pointerThickness/2)+"px",t.crossLY.style.top=t.crossLX.style.left=d.pointerBorderWidth+"px",t.sld.style.overflow="hidden",t.sld.style.width=d.sliderSize+"px",t.sld.style.height=d.height+"px",t.sldGrad.draw(d.sliderSize,d.height,"#000","#000"),t.sldB.style.display=e?"block":"none",t.sldB.style.position="absolute",t.sldB.style.right=d.padding+"px",t.sldB.style.top=d.padding+"px",t.sldB.style.border=d.insetWidth+"px solid",t.sldB.style.borderColor=d.insetColor,t.sldM._jscInstance=d,t.sldM._jscControlName="sld",t.sldM.style.display=e?"block":"none",t.sldM.style.position="absolute",t.sldM.style.right="0",t.sldM.style.top="0",t.sldM.style.width=d.sliderSize+r/2+d.padding+2*d.insetWidth+"px",t.sldM.style.height=n[1]+"px",t.sldM.style.cursor="default",t.sldPtrIB.style.border=t.sldPtrOB.style.border=d.pointerBorderWidth+"px solid "+d.pointerBorderColor,t.sldPtrOB.style.position="absolute",t.sldPtrOB.style.left=-(2*d.pointerBorderWidth+d.pointerThickness)+"px",t.sldPtrOB.style.top="0",t.sldPtrMB.style.border=d.pointerThickness+"px solid "+d.pointerColor,t.sldPtrS.style.width=d.sliderSize+"px",t.sldPtrS.style.height=h+"px",t.btn.style.display=d.closable?"block":"none",t.btn.style.position="absolute",t.btn.style.left=d.padding+"px",t.btn.style.bottom=d.padding+"px",t.btn.style.padding="0 15px",t.btn.style.height=d.buttonHeight+"px",t.btn.style.border=d.insetWidth+"px solid",i=(i=d.insetColor.split(/\s+/)).length<2?i[0]:i[1]+" "+i[0]+" "+i[0]+" "+i[1],t.btn.style.borderColor=i,t.btn.style.color=d.buttonColor,t.btn.style.font="12px sans-serif",t.btn.style.textAlign="center";try{t.btn.style.cursor="pointer"}catch(e){t.btn.style.cursor="hand"}t.btn.onmousedown=function(){d.hide()},t.btnT.style.lineHeight=d.buttonHeight+"px",t.btnT.innerHTML="",t.btnT.appendChild(document.createTextNode(d.closeText)),s(),a(),m.picker.owner&&m.picker.owner!==d&&m.unsetClass(m.picker.owner.targetElement,d.activeClass),m.picker.owner=d,m.isElementType(c,"body")?m.redrawPosition():m._drawPosition(d,0,0,"relative",!1),t.wrap.parentNode!=c&&c.appendChild(t.wrap),m.setClass(d.targetElement,d.activeClass)}function s(){switch(m.getPadYComponent(d)){case"s":var e=1;break;case"v":e=2}var t=Math.round(d.hsv[0]/360*(d.width-1)),n=Math.round((1-d.hsv[e]/100)*(d.height-1)),o=2*d.pointerBorderWidth+d.pointerThickness+2*d.crossSize,o=-Math.floor(o/2);switch(m.picker.cross.style.left=t+o+"px",m.picker.cross.style.top=n+o+"px",m.getSliderComponent(d)){case"s":var r=l(d.hsv[0],100,d.hsv[2]),i=l(d.hsv[0],0,d.hsv[2]),r="rgb("+Math.round(r[0])+","+Math.round(r[1])+","+Math.round(r[2])+")",i="rgb("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+")";m.picker.sldGrad.draw(d.sliderSize,d.height,r,i);break;case"v":var s=l(d.hsv[0],d.hsv[1],100),r="rgb("+Math.round(s[0])+","+Math.round(s[1])+","+Math.round(s[2])+")",i="#000";m.picker.sldGrad.draw(d.sliderSize,d.height,r,i)}}function a(){var e=m.getSliderComponent(d);if(e){switch(e){case"s":var t=1;break;case"v":t=2}e=Math.round((1-d.hsv[t]/100)*(d.height-1));m.picker.sldPtrOB.style.top=e-(2*d.pointerBorderWidth+d.pointerThickness)-Math.floor(h/2)+"px"}}function r(){return m.picker&&m.picker.owner===d}var i,d,c,h,p,u;this.hide=function(){r()&&(m.unsetClass(d.targetElement,d.activeClass),m.picker.wrap.parentNode.removeChild(m.picker.wrap),delete m.picker.owner)},this.show=function(){o()},this.redraw=function(){r()&&o()},this.importColor=function(){this.valueElement&&m.isElementType(this.valueElement,"input")?this.refine?!this.required&&/^\s*$/.test(this.valueElement.value)?(this.valueElement.value="",this.styleElement&&(this.styleElement.style.backgroundImage=this.styleElement._jscOrigStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement._jscOrigStyle.backgroundColor,this.styleElement.style.color=this.styleElement._jscOrigStyle.color),this.exportColor(m.leaveValue|m.leaveStyle)):this.fromString(this.valueElement.value)||this.exportColor():this.fromString(this.valueElement.value,m.leaveValue)||(this.styleElement&&(this.styleElement.style.backgroundImage=this.styleElement._jscOrigStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement._jscOrigStyle.backgroundColor,this.styleElement.style.color=this.styleElement._jscOrigStyle.color),this.exportColor(m.leaveValue|m.leaveStyle)):this.exportColor()},this.exportColor=function(e){var t,n;e&m.leaveValue||!this.valueElement||(t=this.toString(),this.uppercase&&(t=t.toUpperCase()),this.hash&&(t="#"+t),m.isElementType(this.valueElement,"input")?this.valueElement.value=t:this.valueElement.innerHTML=t),e&m.leaveStyle||this.styleElement&&(t="#"+this.toString(),n=this.isLight()?"#000":"#FFF",this.styleElement.style.backgroundImage="none",this.styleElement.style.backgroundColor=t,this.styleElement.style.color=n,this.overwriteImportant)&&this.styleElement.setAttribute("style","background: "+t+" !important; color: "+n+" !important;"),e&m.leavePad||!r()||s(),e&m.leaveSld||!r()||a()},this.fromHSV=function(e,t,n,o){if(null!==e){if(isNaN(e))return!1;e=Math.max(0,Math.min(360,e))}if(null!==t){if(isNaN(t))return!1;t=Math.max(0,Math.min(100,this.maxS,t),this.minS)}if(null!==n){if(isNaN(n))return!1;n=Math.max(0,Math.min(100,this.maxV,n),this.minV)}this.rgb=l(null===e?this.hsv[0]:this.hsv[0]=e,null===t?this.hsv[1]:this.hsv[1]=t,null===n?this.hsv[2]:this.hsv[2]=n),this.exportColor(o)},this.fromRGB=function(e,t,n,o){if(null!==e){if(isNaN(e))return!1;e=Math.max(0,Math.min(255,e))}if(null!==t){if(isNaN(t))return!1;t=Math.max(0,Math.min(255,t))}if(null!==n){if(isNaN(n))return!1;n=Math.max(0,Math.min(255,n))}e=function(e,t,n){e/=255,t/=255,n/=255;var o=Math.min(Math.min(e,t),n),r=Math.max(Math.max(e,t),n),i=r-o;if(0==i)return[null,0,100*r];o=e===o?3+(n-t)/i:t===o?5+(e-n)/i:1+(t-e)/i;return[60*(6==o?0:o),i/r*100,100*r]}(null===e?this.rgb[0]:e,null===t?this.rgb[1]:t,null===n?this.rgb[2]:n),null!==e[0]&&(this.hsv[0]=Math.max(0,Math.min(360,e[0]))),0!==e[2]&&(this.hsv[1]=null===e[1]?null:Math.max(0,this.minS,Math.min(100,this.maxS,e[1]))),this.hsv[2]=null===e[2]?null:Math.max(0,this.minV,Math.min(100,this.maxV,e[2])),t=l(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=t[0],this.rgb[1]=t[1],this.rgb[2]=t[2],this.exportColor(o)},this.fromString=function(e,t){if(r=e.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i))return 6===r[1].length?this.fromRGB(parseInt(r[1].substr(0,2),16),parseInt(r[1].substr(2,2),16),parseInt(r[1].substr(4,2),16),t):this.fromRGB(parseInt(r[1].charAt(0)+r[1].charAt(0),16),parseInt(r[1].charAt(1)+r[1].charAt(1),16),parseInt(r[1].charAt(2)+r[1].charAt(2),16),t),!0;if(r=e.match(/^\W*rgba?\(([^)]*)\)\W*$/i)){var n,o,e=r[1].split(","),r=/^\s*(\d*)(\.\d+)?\s*$/;if(3<=e.length&&(n=e[0].match(r))&&(o=e[1].match(r))&&(e=e[2].match(r)))return r=parseFloat((n[1]||"0")+(n[2]||"")),n=parseFloat((o[1]||"0")+(o[2]||"")),o=parseFloat((e[1]||"0")+(e[2]||"")),this.fromRGB(r,n,o,t),!0}return!1},this.toString=function(){return(256|Math.round(this.rgb[0])).toString(16).substr(1)+(256|Math.round(this.rgb[1])).toString(16).substr(1)+(256|Math.round(this.rgb[2])).toString(16).substr(1)},this.toHEXString=function(){return"#"+this.toString().toUpperCase()},this.toRGBString=function(){return"rgb("+Math.round(this.rgb[0])+","+Math.round(this.rgb[1])+","+Math.round(this.rgb[2])+")"},this.isLight=function(){return 127.5<.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]},this._processParentElementsInDOM=function(){if(!this._linkedElementsProcessed){this._linkedElementsProcessed=!0;var e=this.targetElement;do{var t=m.getStyle(e)}while(t&&"fixed"===t.position.toLowerCase()&&(this.fixed=!0),e===this.targetElement||e._jscEventsAttached||(m.attachEvent(e,"scroll",m.onParentScroll),e._jscEventsAttached=!0),(e=e.parentNode)&&!m.isElementType(e,"body"))}},"string"==typeof e?(i=e,(u=document.getElementById(i))?this.targetElement=u:m.warn("Could not find target element with ID '"+i+"'")):e?this.targetElement=e:m.warn("Invalid target element: '"+e+"'"),this.targetElement._jscLinkedInstance?m.warn("Cannot link jscolor twice to the same element. Skipping."):((this.targetElement._jscLinkedInstance=this).valueElement=m.fetchElement(this.valueElement),this.styleElement=m.fetchElement(this.styleElement),c=(d=this).container?m.fetchElement(this.container):document.getElementsByTagName("body")[0],h=3,m.isElementType(this.targetElement,"button")&&(this.targetElement.onclick?(p=this.targetElement.onclick,this.targetElement.onclick=function(e){return p.call(this,e),!1}):this.targetElement.onclick=function(){return!1}),this.valueElement&&m.isElementType(this.valueElement,"input")&&(m.attachEvent(this.valueElement,"keyup",u=function(){d.fromString(d.valueElement.value,m.leaveValue),m.dispatchFineChange(d)}),m.attachEvent(this.valueElement,"input",u),m.attachEvent(this.valueElement,"blur",function(){d.importColor()}),this.valueElement.setAttribute("autocomplete","off")),this.styleElement&&(this.styleElement._jscOrigStyle={backgroundImage:this.styleElement.style.backgroundImage,backgroundColor:this.styleElement.style.backgroundColor,color:this.styleElement.style.color}),this.value?this.fromString(this.value)||this.exportColor():this.importColor())}};function t(e,t,n,o,r,i){this.hShadow=e,this.vShadow=t,this.blur=n,this.spread=o,this.color=r,this.inset=!!i}function o(e){for(var t=0;t<e.length;t+=1)if(e[t]in n.style)return e[t]}return m.jscolor.lookupClass="jscolor",m.jscolor.installByClassName=function(e){var t=document.getElementsByTagName("input"),n=document.getElementsByTagName("button");m.tryInstallOnElements(t,e),m.tryInstallOnElements(n,e)},m.register(),m.jscolor}());