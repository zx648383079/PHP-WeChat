function bindRegister(){$(".login-form .input-group input").blur(function(){var n=$(this),o=n.closest(".input-group"),i=n.attr("name"),n=n.val().toString().trim();n.length<1?o.addClass("error"):"name"!==i&&"email"!==i?"rePassword"===i&&n!==$('.login-form input[name="password"]').val()&&(o.addClass("error"),Dialog.tip("两次密码不一致")):postJson(BASE_URI+"check",{name:i,value:n},function(n){200==n.code&&n.data&&(o.addClass("error"),Dialog.tip(("name"==i?"昵称":"邮箱")+"已注册"))})})}function bindLogin(){function n(){t.find(".qr-box img").attr("src",BASE_URI+"qr?v="+Math.random()),i=!0,r(),t.attr("class","login-qr-box")}var o=!1,i=!1,t=$(".login-form .login-qr-box"),r=function(){i&&setTimeout(function(){var o;o=r,$.getJSON(BASE_URI+"qr/check",function(n){return 200==n.code?(t.attr("class","login-qr-box qr_success"),i=!1,void parseAjax(n)):201!=n.code?202==n.code?(t.attr("class","login-qr-box waiting_confirm"),void(o&&o())):(203==n.code?t.attr("class","login-qr-box qr_reject"):t.attr("class","login-qr-box qr_expired"),void(i=!1)):void(o&&o())})},3e3)};$(".login-form .other-box .fa-qrcode").click(function(){$(".login-box").addClass("slided"),o||(o=!0,n())}),t.find(".fa-sync").click(function(){n()}),t.find(".btn").click(function(){$(".login-box").removeClass("slided")});var a={mediation:"required",publicKey:{userVerification:"required",challenge:new Uint8Array(16),timeout:6e4}};$(".login-webauth").click(function(){navigator.credentials&&navigator.credentials.get(a).then(function(n){console.log(n)}).catch(console.error)}).toggle(!!navigator.credentials)}$(function(){$(window.parent.document.body).hasClass("login-page")?$(".login-form").on("focus",".input-group input",function(){$(this).closest(".input-group").addClass("input-focus").removeClass("error")}).on("blur",".input-group input",function(){$(this).closest(".input-group").removeClass("input-focus")}).on("click",".captcha-input .btn",function(n){n.preventDefault();n=$(this).find("img");n.attr("src",n.data("src")+"?v="+Math.random())}).submit(function(){var o=$(this);if(0<o.find(".error").length)return Dialog.tip("您填写的信息不正确!"),!1;var i=Dialog.loading();return postJson(o.attr("action"),o.serialize(),function(n){i.close(),1009===n.code&&o.find(".captcha-input").show().find(".btn").trigger("click"),parseAjax(n)}),!1}):window.parent.location.href=window.location.href});