function bindRegister(){$(".login-form .input-group input").blur(function(){var o=$(this),i=o.closest(".input-group"),n=o.attr("name"),r=o.val().toString().trim();if(r.length<1)i.addClass("error");else{if("name"!==n&&"email"!==n)return"rePassword"===n&&r!==$('.login-form input[name="password"]').val()?(i.addClass("error"),void Dialog.tip("两次密码不一致")):void 0;postJson(BASE_URI+"check",{name:n,value:r},function(o){if(200==o.code&&o.data)return i.addClass("error"),void Dialog.tip(("name"==n?"昵称":"邮箱")+"已注册")})}})}function bindLogin(){function o(){r.find(".qr-box img").attr("src",BASE_URI+"qr?v="+Math.random()),n=!0,t(),r.attr("class","login-qr-box")}var i=!1,n=!1,r=$(".login-form .login-qr-box"),t=function(){n&&setTimeout(function(){var i;i=t,$.getJSON(BASE_URI+"qr/check",function(o){if(200==o.code)return r.attr("class","login-qr-box qr_success"),n=!1,void parseAjax(o);if(201!=o.code){if(202==o.code)return r.attr("class","login-qr-box waiting_confirm"),void(i&&i());if(203==o.code)return r.attr("class","login-qr-box qr_reject"),void(n=!1);r.attr("class","login-qr-box qr_expired"),n=!1}else i&&i()})},3e3)};$(".login-form .other-box .fa-qrcode").click(function(){$(".login-box").addClass("slided"),i||(i=!0,o())}),r.find(".fa-sync").click(function(){o()}),r.find(".btn").click(function(){$(".login-box").removeClass("slided")});var e={mediation:"required",publicKey:{userVerification:"required",challenge:new Uint8Array(16),timeout:6e4}};$(".login-webauth").click(function(){navigator.credentials&&navigator.credentials.get(e).then(function(o){console.log(o)}).catch(console.error)}).toggle(!!navigator.credentials)}$(function(){$(window.parent.document.body).hasClass("login-page")?$(".login-form").on("focus",".input-group input",function(){$(this).closest(".input-group").addClass("input-focus").removeClass("error")}).on("blur",".input-group input",function(){$(this).closest(".input-group").removeClass("input-focus")}).submit(function(){var o=$(this);if(0<o.find(".error").length)return Dialog.tip("您填写的信息不正确!"),!1;var i=Dialog.loading();return postJson(o.attr("action"),o.serialize(),function(o){i.close(),parseAjax(o)}),!1}):window.parent.location.href=window.location.href});