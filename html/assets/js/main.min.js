function ajaxForm(t,a,e){postJson(t,a,function(t){e?e(t):parseAjax(t)})}var postJson=function(t,a,e){"function"==typeof a&&(e=a,a={}),$.post(t,a,e,"json")},parseAjax=function(t){200==t.code?(Dialog.tip(t.messages||"操作执行完成！"),t.data&&t.data.refresh&&setTimeout(function(){window.location.reload()},500),t.data&&t.data.url&&setTimeout(function(){window.location.href=t.data.url},500)):Dialog.tip(t.errors||"操作执行失败！")},toFoat=function(t){return t&&(t=t.replace(",","").match(/[\d\.]+/))?parseFloat(t):0},toInt=function(t){return t&&(t=t.replace(",","").match(/[\d]+/))?parseInt(t):0},strFormat=function(t){for(var a=[],e=1;e<arguments.length;e++)a[e-1]=arguments[e];return t.replace(/\{(\d+)\}/g,function(t,e){return a[e]})};$(function(){$("a[data-type=refresh]").click(function(){window.location.reload()}),$("a[data-type=del]").click(function(t){t.preventDefault();var a=$(this).attr("data-tip")||"确定删除这条数据？";confirm(a)&&postJson($(this).attr("href"),function(t){0!=t.code||t.msg||(t.msg="删除成功！"),parseAjax(t)})}),$("a[data-type=ajax]").click(function(e){e.preventDefault();var $this=$(this),successTip=$this.attr("data-success")||"提交成功！",errorTip=$this.attr("data-error")||"提交失败！",callback=$this.attr("data-callback");postJson($this.attr("href"),function(data){0!=data.code||data.msg||(data.msg=successTip),0==data.code&&callback&&eval(callback+"($this, data);"),parseAjax(data)})}),$("form[data-type=ajax]").submit(function(){var t=$(this);return ajaxForm(t.attr("action"),t.serialize()),!1}),$("a[data-type=post]").click(function(t){t.preventDefault();var a=$('<form action="'+$(this).attr("href")+'" method="post"></form');$(document.body).append(a),a.submit()});var file_input=$(".file-input [data-type=upload]");file_input.length>0&&file_input.upload({}),$(".file-input [data-type=preview]").click(function(){var t=$(this).parents(".file-input").find("input").val();t?Dialog.box({title:"预览",content:'<img src="'+t+'">'}):Dialog.tip("请上传图片！")}),$(".zd-tab .zd-tab-head .zd-tab-item").click(function(){var t=$(this);t.addClass("active").siblings().removeClass("active"),t.parents(".zd-tab").find(".zd-tab-body .zd-tab-item").eq(t.index()).addClass("active").siblings().removeClass("active")}),$(".page-tip .toggle").click(function(){$(this).parents(".page-tip").toggleClass("min")}),$(".left-catelog .left-catelog-toggle").click(function(){$(this).parents(".left-catelog").toggleClass("expand")});var autoRedirct=function(){var t=$(".autoRedirct");if(!(t.length<1)){var a=t.attr("href")||t.attr("data-url"),e=t.text(),i=toInt(t.attr("data-time"));i<1&&(i=3),t.text(e+"("+i+" 秒)");var n=setInterval(function(){i--,t.text(e+"("+i+" 秒)"),i<=0&&(clearInterval(n),t.text(e+"(正在跳转...)"),window.location.href=a)},1e3)}};autoRedirct()});