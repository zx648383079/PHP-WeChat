function postJson(t,a,e){"function"==typeof a&&(e=a,a={}),$.post(t,a,e,"json")}function ajaxForm(t,a,e){postJson(t,a,function(t){e?e(t):parseAjax(t)})}function parseAjax(t){302!=t.code?200==t.code?(Dialog.tip(t.messages||"操作执行完成！"),t.data&&t.data.refresh&&setTimeout(function(){"function"!=typeof parseAjaxUri?window.location.reload():parseAjaxUri(window.location.href)},500),t.data&&t.data.url&&setTimeout(function(){"function"!=typeof parseAjaxUri?window.location.href=t.data.url:parseAjaxUri(t.data.url)},500)):Dialog.tip(t.errors||"操作执行失败！"):window.location.href=t.url}var toFoat=function(t){return t&&(t=t.replace(",","").match(/[\d\.]+/))?parseFloat(t):0},toInt=function(t){return t&&(t=t.replace(",","").match(/[\d]+/))?parseInt(t):0},strFormat=function(t){for(var e=[],a=1;a<arguments.length;a++)e[a-1]=arguments[a];return t.replace(/\{(\d+)\}/g,function(t,a){return e[a]})};$(function(){if("function"==typeof Upload)var file_upload=new Upload(null,{url:"/ueditor.php?action=uploadimage",name:"upfile",template:"{url}",afterUpload:function(t){return t}});$(document).on("click","a[data-type=refresh]",function(){window.location.reload()}).on("click","a[data-type=del]",function(t){t.preventDefault();var a=$(this).attr("data-tip")||"确定删除这条数据？";confirm(a)&&postJson($(this).attr("href"),function(t){200!=t.code||t.msg||(t.msg="删除成功！"),parseAjax(t)})}).on("click","a[data-type=ajax]",function(e){e.preventDefault();var $this=$(this),successTip=$this.attr("data-success")||"提交成功！",errorTip=$this.attr("data-error")||"提交失败！",callback=$this.attr("data-callback");postJson($this.attr("href"),function(data){200!=data.code||data.msg||(data.msg=successTip),200==data.code&&callback&&eval(callback+"($this, data);"),parseAjax(data)})}).on("submit","form[data-type=ajax]",function(){var t=$(this);return ajaxForm(t.attr("action"),t.serialize()),!1}).on("click","a[data-type=post]",function(t){t.preventDefault();var a=$('<form action="'+$(this).attr("href")+'" method="post"></form');$(document.body).append(a),a.submit()}).on("click",".file-input [data-type=upload]",function(){file_upload.start($(this))}).on("click",".file-input [data-type=preview]",function(){var t=$(this).parents(".file-input").find("input").val();t?Dialog.box({title:"预览",content:'<img src="'+t+'">'}):Dialog.tip("请上传图片！")}).on("click",".zd-tab .zd-tab-head .zd-tab-item",function(){var t=$(this);t.addClass("active").siblings().removeClass("active"),t.closest(".zd-tab").find(".zd-tab-body .zd-tab-item").eq(t.index()).addClass("active").siblings().removeClass("active")}).on("click",".page-tip .toggle",function(){$(this).closest(".page-tip").toggleClass("min")}),$(".sidebar-container .sidebar-container-toggle").click(function(){$(this).closest(".sidebar-container").toggleClass("expand")}),$(".sidebar-container li a").click(function(){var t=$(this),a=t.closest("li");0<a.find("ul").length?a.toggleClass("expand"):($(".sidebar-container li").removeClass("active"),a.addClass("active"),t.closest(".sidebar-container").removeClass("expand"))});var autoRedirct=function(){var t=$(".autoRedirct");if(!(t.length<1)){var a=t.attr("href")||t.attr("data-url"),e=t.text(),i=toInt(t.attr("data-time"));i<1&&(i=3),t.text(e+"("+i+" 秒)");var n=setInterval(function(){i--,t.text(e+"("+i+" 秒)"),i<=0&&(clearInterval(n),t.text(e+"(正在跳转...)"),window.location.href=a)},1e3)}};autoRedirct()});