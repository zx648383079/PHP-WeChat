function bindSearch() {
    var searchBox = $('.search-box');
    var searchForm = searchBox.find('.search-input');
    var refreshSuggest = function (keywords) {
        var suggestBox = searchBox.find('.suggest-body');
        $.getJSON(BASE_URI + 'search/suggestion', { keywords: keywords }, function (res) {
            if (res.code !== 200) {
                return;
            }
            var html = '';
            $.each(res.data, function (i) {
                html += "<li><span class=\"item-no\">" + (i + 1) + "</span><span class=\"item-text\">" + this + "</span></li>";
            });
            suggestBox.toggle(html.length > 0).find('ul').html(html);
        });
    };
    var tapSearch = function (keywords) {
        searchForm.find('input').val(keywords);
        searchForm.trigger('submit');
    };
    searchForm.on('keyup', 'input', function (e) {
        var $this = $(this);
        var keywords = $this.val();
        searchForm.find('.clear-btn').toggle(keywords.trim().length > 0);
        if (e.key === 'Enter') {
            // searchForm.trigger('submit');
            return;
        }
        if (e.key !== 'ArrowDown' && e.key !== 'ArrowUp') {
            refreshSuggest(keywords);
            return;
        }
        var items = searchBox.find('.suggest-body li');
        if (items.length < 0) {
            return;
        }
        var i = -1;
        for (var j = 0; j < items.length; j++) {
            var element_1 = $(items[j]);
            if (element_1.hasClass('active')) {
                i = j;
                element_1.removeClass('active');
                break;
            }
        }
        if (e.key === 'ArrowDown') {
            i = i < items.length - 1 ? i + 1 : 0;
        }
        else if (e.key === 'ArrowUp') {
            i = (i < 1 ? items.length : i) - 1;
        }
        var element = items.eq(i);
        element.addClass('active');
        $this.val(element.text().replace(/^\d+/, ''));
    }).on('click', '.clear-btn', function () {
        searchForm.find('input').val('');
        $(this).hide();
    });
    searchBox.on('click', '.suggest-body li', function () {
        tapSearch($(this).text().trim().replace(/^\d+/, ''));
    });
    $(document).on('click', function () {
        searchBox.find('.suggest-body').hide();
    });
}
