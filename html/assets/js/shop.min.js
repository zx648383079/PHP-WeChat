function addToCart(a,e){void 0===e&&(e=1),postJson("cart/add?goods="+a+"&amount="+e,function(a){parseAjax(a)})}function buyGoods(a,e){void 0===e&&(e=1)}function collectGoods(a,e){postJson("collect/toggle?id="+a,function(a){200==a.code&&e&&$(e).toggleClass("active",a.data)})}function mapItem(a){$(".cart-item").each(function(){if(0==a($(this)))return!1})}function mapCheckedItem(e){mapItem(function(a){if(a.find(".check-box").hasClass("active"))return 0!=e(a)&&void 0})}function refreshCart(){}function search(a){window.location.href=$(".header-search").data("url")+"?keywords="+a}function bindCart(i){$(".number-box input").change(function(){var a=$(this),e=a.val(),t=a.closest(".cart-item").attr("data-id");$.getJSON(i+"cart/update",{id:t,amount:e},function(a){parseAjax(a)})}),$(".cart-item .fa-trash").click(function(){var e=$(this).closest(".cart-item"),a=e.attr("data-id");$.getJSON(i+"cart/delete",{id:a},function(a){parseAjax(a),200==a.code&&e.remove()})}),$(".cart-item .check-box").change(function(){refreshCart()}),$(".cart-footer .check-box").change(function(){$(".cart-item .check-box").toggleClass("active",$(this).hasClass("active")),refreshCart()})}function goPhoneLogin(){$(".login-type-box").hide(),$(".login-box").removeClass("hide")}function goEmailLogin(){$(".login-type-box").hide(),$(".login-box").removeClass("hide"),$(".login-box .email-password").removeClass("hide"),$(".login-box .phone-code,.login-box .phone-password").addClass("hide")}$(function(){$(".check-box").click(function(){$(this).toggleClass("active").trigger("change")}),$(".toggle-box").click(function(){$(this).toggleClass("active").trigger("change")}),$(".number-box .fa-minus").click(function(){var a=$(this).closest(".number-box").find("input"),e=a.attr("min")||0,t=Number(a.val())||0;e<t&&(t-=1),a.val(t).trigger("change")}),$(".number-box .fa-plus").click(function(){var a=$(this).closest(".number-box").find("input"),e=a.attr("max")||999,t=Number(a.val())||0;t<e&&(t+=1),a.val(t).trigger("change")}),$(".cart-footer .btn").click(function(a){a.preventDefault();var e=[];mapCheckedItem(function(a){e.push(a.data("id"))}),e.length<1?Dialog.tip("请选择结算的商品"):window.location.href=$(this).attr("href")+"?cart="+e.join("-")}),$(".checkout-footer .btn").click(function(a){a.preventDefault();var e=$(this).closest("form"),t=!0;$.each(e.serializeArray(),function(){return"address"==this.name&&parseInt(this.value)<1?(Dialog.tip("请选择收货地址"),t=!1):"shipping"==this.name&&parseInt(this.value)<1?(Dialog.tip("请选择配送方式"),t=!1):"payment"==this.name&&parseInt(this.value)<1?(Dialog.tip("请选择支付方式"),t=!1):void 0}),t&&ajaxForm(e.attr("action"),e.serialize())}),$(".tab-box .tab-header .tab-item").click(function(){var a=$(this);a.addClass("active").siblings().removeClass("active"),a.closest(".tab-box").find(".tab-body .tab-item").eq(a.index()).addClass("active").siblings().removeClass("active")}),$(".header-nav>li").mouseenter(function(){$(".header-nav .nav-dropdown").hide(),$(this).find(".nav-dropdown").show()}),$(".header-nav").mouseleave(function(){$(this).find(".nav-dropdown").hide()}),$(".header-cart").mouseover(function(){$(this).find(".cart-dialog").show()}).mouseout(function(){$(this).find(".cart-dialog").hide()}),$(".header-search").mouseover(function(){$(this).addClass("expanded")}).mouseout(function(){$(this).removeClass("expanded")}),$("img.lazy").lazyload({callback:"img"}),$(".more-load").lazyload({mode:1,callback:function(e){if(!e.data("is_loading")){e.data("is_loading",!0);var t=parseInt(e.data("page")||"0")+1,a=e.data("url"),i=e.data("target");$.getJSON(a,{page:t},function(a){e.data("is_loading",!1),200==a.code&&($(i).append(a.data.html),e.data("page",t),a.data.has_more||e.remove())})}}});var a=$(".header-search input").keydown(function(a){13==a.keyCode&&search($(this).val())});$(".header-search .fa-search").click(function(){search(a.val())}),$(window).scroll(function(){$(".header-main").toggleClass("top-fixed",180<$(this).scrollTop())}).trigger("scroll")});