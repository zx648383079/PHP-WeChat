function addToCart(a,t){void 0===t&&(t=1),postJson("cart/add?goods="+a+"&amount="+t,function(a){parseAjax(a)})}function buyGoods(a,t){void 0===t&&(t=1)}function collectGoods(a,t){postJson("collect/toggle?id="+a,function(a){200==a.code&&t&&$(t).toggleClass("active",a.data)})}function mapItem(a){$(".cart-item").each(function(){if(0==a($(this)))return!1})}function mapCheckedItem(t){mapItem(function(a){if(a.find(".check-box").hasClass("active"))return 0!=t(a)&&void 0})}function refreshCart(){}function search(a){window.location.href=$(".header-search").data("url")+"?keywords="+a}function bindCart(i){$(".number-box input").change(function(){var a=$(this),t=a.val(),e=a.closest(".cart-item").attr("data-id");$.getJSON(i+"cart/update",{id:e,amount:t},function(a){parseAjax(a)})}),$(".cart-item .fa-trash").click(function(){var t=$(this).closest(".cart-item"),a=t.attr("data-id");$.getJSON(i+"cart/delete",{id:a},function(a){parseAjax(a),200==a.code&&t.remove()})}),$(".cart-item .check-box").change(function(){refreshCart()}),$(".cart-footer .check-box").change(function(){$(".cart-item .check-box").toggleClass("active",$(this).hasClass("active")),refreshCart()})}function goPhoneLogin(){$(".login-type-box").hide(),$(".login-box").removeClass("hide")}function goEmailLogin(){$(".login-type-box").hide(),$(".login-box").removeClass("hide"),$(".login-box .email-password").removeClass("hide"),$(".login-box .phone-code,.login-box .phone-password").addClass("hide")}$(function(){$(".check-box").click(function(){$(this).toggleClass("active").trigger("change")}),$(".toggle-box").click(function(){$(this).toggleClass("active").trigger("change")}),$(".number-box .fa-minus").click(function(){var a=$(this).closest(".number-box").find("input"),t=a.attr("min")||0,e=Number(a.val())||0;t<e&&(e-=1),a.val(e).trigger("change")}),$(".number-box .fa-plus").click(function(){var a=$(this).closest(".number-box").find("input"),t=a.attr("max")||999,e=Number(a.val())||0;e<t&&(e+=1),a.val(e).trigger("change")}),$(".cart-footer .btn").click(function(a){a.preventDefault();var t=[];mapCheckedItem(function(a){t.push(a.data("id"))}),t.length<1?Dialog.tip("请选择结算的商品"):window.location.href=$(this).attr("href")+"?cart="+t.join("-")}),$(".checkout-footer .btn").click(function(a){a.preventDefault();var t=$(this).closest("form"),e=!0;$.each(t.serializeArray(),function(){return"address"==this.name&&parseInt(this.value)<1?(Dialog.tip("请选择收货地址"),e=!1):"shipping"==this.name&&parseInt(this.value)<1?(Dialog.tip("请选择配送方式"),e=!1):"payment"==this.name&&parseInt(this.value)<1?(Dialog.tip("请选择支付方式"),e=!1):void 0}),e&&ajaxForm(t.attr("action"),t.serialize())}),$(".tab-box .tab-header .tab-item").click(function(){var a=$(this);a.addClass("active").siblings().removeClass("active"),a.closest(".tab-box").find(".tab-body .tab-item").eq(a.index()).addClass("active").siblings().removeClass("active")}),$(".header-nav>li").mouseenter(function(){$(".header-nav .nav-dropdown").hide(),$(this).find(".nav-dropdown").show()}),$(".scroll-nav .nav-arrow").click(function(){$(this).closest(".scroll-nav").toggleClass("unfold")}),$(".header-nav").mouseleave(function(){$(this).find(".nav-dropdown").hide()}),$(".header-cart").mouseover(function(){$(this).find(".cart-dialog").show()}).mouseout(function(){$(this).find(".cart-dialog").hide()}),$(".header-search").mouseover(function(){$(this).addClass("expanded")}).mouseout(function(){$(this).removeClass("expanded")}),$("img.lazy").lazyload({callback:"img"}),$(".more-load").lazyload({mode:1,callback:function(t){if(!t.data("is_loading")){t.data("is_loading",!0);var e=parseInt(t.data("page")||"0")+1,a=t.data("url"),i=t.data("target");$.getJSON(a,{page:e},function(a){t.data("is_loading",!1),200==a.code&&($(i).append(a.data.html),t.data("page",e),a.data.has_more||t.remove())})}}});var a=$(".header-search input").keydown(function(a){13==a.keyCode&&search($(this).val())});$(".header-search .fa-search").click(function(){search(a.val())}),$(window).scroll(function(){$(".header-main").toggleClass("top-fixed",180<$(this).scrollTop())}).trigger("scroll")});