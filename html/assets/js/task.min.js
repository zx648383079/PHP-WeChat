var Timer=function(){function t(){}return t.prototype.start=function(t,e){this.stop(),this.element=t,this.startAt=new Date("number"==typeof e?1e3*e:e);var a=this;this._handle=setInterval(function(){a._showTime()},500)},t.prototype._showTime=function(){this.element.text(t.format(new Date-this.startAt))},t.prototype.stop=function(){this.element&&(this.element.text("统计中。。。"),clearInterval(this._handle)),this.element=void 0,this._handle=0},t.format=function(t){var e=(t=Math.floor(t/1e3))%60,a=Math.floor(t/60)%60,s=function(t){return t<10?"0"+t:t};return s(Math.floor(t/3600))+":"+s(a)+":"+s(e)},t}(),timer=new Timer;function bindTask(t){$(".task-item .fa-pause-circle").click(function(){pauseTask(t,$(this).closest(".task-item"))}),$(".task-item .fa-play-circle").click(function(){playTask(t,$(this).closest(".task-item"))}),$(".task-item .fa-stop-circle").click(function(){stopTask(t,$(this).closest(".task-item"))}),$(".task-item").each(function(){var t=$(this),e=t.find(".time");t.hasClass("active")?timer.start(e,parseInt(e.data("start"))):e.text(Timer.format(1e3*parseInt(e.text())))})}function pauseTask(t,e){timer.stop(),postJson(t+"task/pause",{id:e.data("id")},function(t){200==t.code&&e.removeClass("active").find(".time").text(Timer.format(1e3*t.data.time_length))})}function playTask(t,e){postJson(t+"task/play",{id:e.data("id")},function(t){200==t.code&&timer.start(e.addClass("active").find(".time"),t.data.start_at)})}function stopTask(t,e){e.hasClass("active")&&timer.stop(),postJson(t+"task/stop",{id:e.data("id")}),e.remove()}