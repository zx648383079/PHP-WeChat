$(document).ready(function(){$("#weight .weight-grid").draggable({connectToSortable:".weight-row",helper:"clone",opacity:.3,revert:"invalid",start:function(){$("#mainGrid").addClass("hover")},stop:function(t,a){$("#mainGrid").removeClass("hover");var e=a.helper,i=e.parents(".weight-row");!i||i.length<1||(e.width("auto"),$.post("/template/weight/create",{page:PAGE_ID,weight:e.attr("data-weight"),parent_id:i.attr("data-id")},function(t){200==t.code&&e.attr("data-id",t.data.id)},"json"))}}),$("#mainGrid .weight-row").sortable({connectWith:".weight-row"}),$(".panel .fa-close").click(function(){$(this).parents(".panel").parent().addClass("min")}),$(".panel>.head>.title").click(function(){var t=$(this).parents(".panel").parent();t.hasClass("min")&&t.removeClass("min")}),$(".menu>li>.head").click(function(){$(this).parent().toggleClass("active")}),$.htmlClean($("#mainGrid").html(),{format:!0,allowedAttributes:[["id"],["class"],["data-toggle"],["data-target"],["data-parent"],["role"],["data-dismiss"],["aria-labelledby"],["aria-hidden"],["data-slide-to"],["data-slide"]]}),$(".mobile-size li").click(function(){$(".mobile-size").parent().removeClass("open");var t=$(this).attr("data-size").split("*");$("#mainMobile").removeClass().addClass("mobile-"+t[0])}),$(".navbar>li>div").click(function(){$(this).parent().toggleClass("open")}),$(".mobile-size li").click(function(){$(this).addClass("active").siblings().removeClass("active")}),$(".mobile-rotate").click(function(){$("#mainMobile").toggleClass("rotate")}),$(".expand>.head").click(function(){$(this).parent().toggleClass("open")}),$("#mainGrid").on("click",".del",function(){var t=$(this).parent().parent();$.post("/template/weight/destroy?id="+t.attr("data-id"),{},function(a){200==a.code&&t.remove()})});var t;$("#mainGrid").on("click",".edit",function(e){e.stopPropagation(),t=$(this).parents(".weight-grid"),$("#mainGrid .weight-grid").removeClass("weight-edit-mode"),t.addClass("weight-edit-mode"),a(t)});var a=function(t){var a=t.attr("data-id");$.getJSON("/template/weight/config?id="+a,function(t){t.code})}});