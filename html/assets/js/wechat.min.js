function bindEditorInput(e){var i=$(".editor-input-box").on("change",'select[name="type"]',function(){$.get(window.location.href,{type:$(this).val()},function(t){i.html(t)})}).on("change",".media-box input",function(){var l=$(this).closest(".media-box"),t=l.find("#media_type");postJson(e+"media",{type:0<t.length?t.val():"news",keywords:$(this).val()},function(t){for(var e="",i=0,n=t.data.data;i<n.length;i++){var a=n[i];e+='<li data-id="'+a.id+'">'+a.title+"</li>"}l.find(".media-list ul, .media-grid ul").html(e)})}).on("click",".media-list li, .media-grid li",function(){var t=$(this),e=t.closest(".media-box");e.find(".upload-box").html(t.html()),e.find('input[type="hidden"]').val(t.data("id"))}),n=$(".template-preview"),t=$('[name="editor[template_id]"]').change(function(){postJson(e+"reply/template_field",{id:$(this).val()},function(t){if(200==t.code){var e=a.val().toString(),i=[];$.each(t.data,function(){var t=this+"=";e.indexOf(t)<0&&i.push(t)}),0<i.length?a.val((e+"\n"+i.join("\n")).trim()):a.trigger("change")}else n.html("")})}),a=$('[name="editor[template_data]"]').change(function(){postJson(e+"reply/template_preview",{id:t.val(),data:$(this).val()},function(t){200==t.code?n.html(t.data.toString().replace(/\\+n/g,"<br>")):n.html("")})})}function bindEditor(t){UE.delEditor("container");var e,i=UE.getEditor("container",{scaleEnabled:!0,toolbars:[["fullscreen","source","undo","redo","bold","italic","underline","customstyle","link","simpleupload","insertvideo"]]}),n=1,a=$(".template-box .templdate-list");$(".template-menu li").click(function(){$(this).addClass("active").siblings().removeClass("active"),n=1,e=$(this).attr("data-url"),n<2&&a.empty(),$.post(e,{page:n},function(t){a.append(t)})}).eq(0).trigger("click"),a.on("click",".rich_media_content",function(){i.execCommand("insertHtml",$(this).html())})}function bindEmulate(i){function t(){}function n(t,e){$.post(BASE_URI+"emulate/reply",{id:i,type:e,content:t},function(t){if(200===t.code)if(setTimeout(function(){a.scrollTop(a[0].scrollHeight)},100),"text"!==(t=t.data).type){if("news"===t.type){var e="";$.each(t.items,function(){e+='<a class="new-item" href="'+this.url+'" target="_blank"><div class="thumb"><img src="'+this.thumb+'" alt="'+this.title+'"></div><div class="title">'+this.title+"</div></a>"}),a.append(e)}}else a.append('<div class="message-left"><img class="avatar" src="/assets/images/favicon.png"><div class="content">'+t.content+"</div></div>")},"json")}var e=$(".emulate-box"),a=e.find(".scroll-body");e.on("click",".box-header .fa-arrow-left",function(){history.back()}).on("click",".header-right .fa",function(){$(this).next(".sub-box").toggle()});var l=e.find(".box-footer").on("click",".fa-list",function(){l.removeClass("toggle-input").removeClass("toggle-more")}).on("click",".fa-plus-circle",function(){l.toggleClass("toggle-more")}).on("click",".fa-keyboard",function(){l.addClass("toggle-input").removeClass("toggle-more")}).on("click",".menu-body li",function(t){var e=$(this);e.data("event")?n(e.data("event"),"menu"):e.toggleClass("active")}).on("keydown",".input-box textarea",function(t){var e;13==t.keyCode&&((e=this.value.trim()).length<1||(a.append('<div class="message-right"><img class="avatar" src="/assets/images/favicon.png"><div class="content">'+e+"</div></div>"),a.scrollTop(a[0].scrollHeight),n(e)),this.value="",t.preventDefault())});$(window).resize(t)}function bindEmulateMedia(){$("img").lazyload({callback:"img"})}